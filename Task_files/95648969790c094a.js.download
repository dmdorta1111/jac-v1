(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,170305,(e,t,n)=>{"use strict";var o=e.r(563331),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useState,a=o.useEffect,l=o.useLayoutEffect,s=o.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=i({inst:{value:n,getSnapshot:t}}),r=o[0].inst,u=o[1];return l(function(){r.value=n,r.getSnapshot=t,d(r)&&u({inst:r})},[e,n,t]),a(function(){return d(r)&&u({inst:r}),e(function(){d(r)&&u({inst:r})})},[e]),s(n),n};n.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},334960,(e,t,n)=>{"use strict";t.exports=e.r(170305)},721665,(e,t,n)=>{"use strict";var o=e.r(563331),r=e.r(334960),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useSyncExternalStore,l=o.useRef,s=o.useEffect,d=o.useMemo,u=o.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var c=l(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;var h=a(e,(c=d(function(){function e(e){if(!s){if(s=!0,a=e,e=o(e),void 0!==r&&f.hasValue){var t=f.value;if(r(t,e))return l=t}return l=e}if(t=l,i(a,e))return t;var n=o(e);return void 0!==r&&r(t,n)?(a=e,t):(a=e,l=n)}var a,l,s=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,n,o,r]))[0],c[1]);return s(function(){f.hasValue=!0,f.value=h},[h]),u(h),h}},596177,(e,t,n)=>{"use strict";t.exports=e.r(721665)},552518,886586,578355,e=>{"use strict";var t,n,o,r,i,a,l,s,d,u,c,f,h,g,p,m,y=e.i(847666);e.i(466437);var x=e.i(563331);function v(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)""!==(o=v(e[n]))&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var b=e.i(8164),w=e.i(692423),S=e.i(954542),E=e.i(816947),M=e.i(811975);let C=e=>()=>e;function N(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:s,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}function k(e){return!e.ctrlKey&&!e.button}function P(){return this.parentNode}function j(e,t){return null==t?{x:e.x,y:e.y}:t}function I(){return navigator.maxTouchPoints||"ontouchstart"in this}function D(){var e,t,n,o,r=k,i=P,a=j,l=I,s={},d=(0,b.dispatch)("start","drag","end"),u=0,c=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",m).on("touchmove.drag",y,M.nonpassive).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&r.call(this,a,l)){var s=v(this,i.call(this,a,l),a,l,"mouse");s&&((0,w.select)(a.view).on("mousemove.drag",g,M.nonpassivecapture).on("mouseup.drag",p,M.nonpassivecapture),(0,E.default)(a.view),(0,M.nopropagation)(a),n=!1,e=a.clientX,t=a.clientY,s("start",a))}}function g(o){if((0,M.default)(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>c}s.mouse("drag",o)}function p(e){(0,w.select)(e.view).on("mousemove.drag mouseup.drag",null),(0,E.yesdrag)(e.view,n),(0,M.default)(e),s.mouse("end",e)}function m(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,l=i.call(this,e,t),s=a.length;for(n=0;n<s;++n)(o=v(this,l,e,t,a[n].identifier,a[n]))&&((0,M.nopropagation)(e),o("start",e,a[n]))}}function y(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=s[o[t].identifier])&&((0,M.default)(e),n("drag",e,o[t]))}function x(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<i;++t)(n=s[r[t].identifier])&&((0,M.nopropagation)(e),n("end",e,r[t]))}function v(e,t,n,o,r,i){var l,c,h,g=d.copy(),p=(0,S.pointer)(i||n,t);if(null!=(h=a.call(e,new N("beforestart",{sourceEvent:n,target:f,identifier:r,active:u,x:p[0],y:p[1],dx:0,dy:0,dispatch:g}),o)))return l=h.x-p[0]||0,c=h.y-p[1]||0,function n(i,a,d){var m,y=p;switch(i){case"start":s[r]=n,m=u++;break;case"end":delete s[r],--u;case"drag":p=(0,S.pointer)(d||a,t),m=u}g.call(i,e,new N(i,{sourceEvent:a,subject:h,target:f,identifier:r,active:m,x:p[0]+l,y:p[1]+c,dx:p[0]-y[0],dy:p[1]-y[1],dispatch:g}),o)}}return f.filter=function(e){return arguments.length?(r="function"==typeof e?e:C(!!e),f):r},f.container=function(e){return arguments.length?(i="function"==typeof e?e:C(e),f):i},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:C(e),f):a},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:C(!!e),f):l},f.on=function(){var e=d.on.apply(d,arguments);return e===d?f:e},f.clickDistance=function(e){return arguments.length?(c=(e*=1)*e,f):Math.sqrt(c)},f}N.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},e.i(250149);var $=e.i(953752),$=$,A=e.i(644200),A=A,R=A,_=e.i(274017),z=e.i(678152);let L=[[-1/0,-1/0],[1/0,1/0]],O=["Enter"," ","Escape"],B={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(t=d||(d={})).Strict="strict",t.Loose="loose",(n=u||(u={})).Free="free",n.Vertical="vertical",n.Horizontal="horizontal",(o=c||(c={})).Partial="partial",o.Full="full";let H={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};(r=f||(f={})).Bezier="default",r.Straight="straight",r.Step="step",r.SmoothStep="smoothstep",r.SimpleBezier="simplebezier",(i=h||(h={})).Arrow="arrow",i.ArrowClosed="arrowclosed",(a=g||(g={})).Left="left",a.Top="top",a.Right="right",a.Bottom="bottom";let T={[g.Left]:g.Right,[g.Right]:g.Left,[g.Top]:g.Bottom,[g.Bottom]:g.Top};function V(e){return null===e?null:e?"valid":"invalid"}let F=e=>"id"in e&&"source"in e&&"target"in e,Z=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),X=(e,t=[0,0])=>{let{width:n,height:o}=ev(e),r=e.origin??t,i=n*r[0],a=o*r[1];return{x:e.position.x-i,y:e.position.y-a}},Y=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return e.forEach(e=>{(void 0===t.filter||t.filter(e))&&(n=en(n,ea(e)),o=!0)}),o?er(n):{x:0,y:0,width:0,height:0}},K=(e,t,[n,o,r]=[0,0,1],i=!1,a=!1)=>{let l={...eh(t,[n,o,r]),width:t.width/r,height:t.height/r},s=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:o=!1}=t;if(a&&!n||o)continue;let r=e.width??t.width??t.initialWidth??null,d=e.height??t.height??t.initialHeight??null,u=es(l,ei(t)),c=(r??0)*(d??0),f=i&&u>0;(!t.internals.handleBounds||f||u>=c||t.dragging)&&s.push(t)}return s};async function W({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},a){let l,s;if(0===e.size)return Promise.resolve(!0);let d=em(Y((l=new Map,s=a?.nodes?new Set(a.nodes.map(e=>e.id)):null,e.forEach(e=>{e.measured.width&&e.measured.height&&(a?.includeHiddenNodes||!e.hidden)&&(!s||s.has(e.id))&&l.set(e.id,e)}),l)),t,n,a?.minZoom??r,a?.maxZoom??i,a?.padding??.1);return await o.setViewport(d,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function U({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){let a=n.get(e),l=a.parentId?n.get(a.parentId):void 0,{x:s,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},u=a.origin??o,c=a.extent||r;if("parent"!==a.extent||a.expandParent)l&&ex(a.extent)&&(c=[[a.extent[0][0]+s,a.extent[0][1]+d],[a.extent[1][0]+s,a.extent[1][1]+d]]);else if(l){let e=l.measured.width,t=l.measured.height;e&&t&&(c=[[s,d],[s+e,d+t]])}else i?.("005","Only child nodes can use a parent extent.");let f=ex(c)?G(t,c,a.measured):t;return(void 0===a.measured.width||void 0===a.measured.height)&&i?.("015","It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."),{position:{x:f.x-s+(a.measured.width??0)*u[0],y:f.y-d+(a.measured.height??0)*u[1]},positionAbsolute:f}}async function q({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){let i,a=new Set(e.map(e=>e.id)),l=[];for(let e of n){if(!1===e.deletable)continue;let t=a.has(e.id),n=!t&&e.parentId&&l.find(t=>t.id===e.parentId);(t||n)&&l.push(e)}let s=new Set(t.map(e=>e.id)),d=o.filter(e=>!1!==e.deletable),u=(i=new Set,l.forEach(e=>{i.add(e.id)}),d.filter(e=>i.has(e.source)||i.has(e.target)));for(let e of d)s.has(e.id)&&!u.find(t=>t.id===e.id)&&u.push(e);if(!r)return{edges:u,nodes:l};let c=await r({nodes:l,edges:u});return"boolean"==typeof c?c?{edges:u,nodes:l}:{edges:[],nodes:[]}:c}let Q=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),G=(e={x:0,y:0},t,n)=>({x:Q(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Q(e.y,t[0][1],t[1][1]-(n?.height??0))});function J(e,t,n){let{width:o,height:r}=ev(n),{x:i,y:a}=n.internals.positionAbsolute;return G(e,[[i,a],[i+o,a+r]],t)}let ee=(e,t,n)=>e<t?Q(Math.abs(e-t),1,t)/t:e>n?-Q(Math.abs(e-n),1,t)/t:0,et=(e,t,n=15,o=40)=>[ee(e.x,o,t.width-o)*n,ee(e.y,o,t.height-o)*n],en=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),eo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),er=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),ei=(e,t=[0,0])=>{let{x:n,y:o}=Z(e)?e.internals.positionAbsolute:X(e,t);return{x:n,y:o,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},ea=(e,t=[0,0])=>{let{x:n,y:o}=Z(e)?e.internals.positionAbsolute:X(e,t);return{x:n,y:o,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:o+(e.measured?.height??e.height??e.initialHeight??0)}},el=(e,t)=>er(en(eo(e),eo(t))),es=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),ed=e=>eu(e.width)&&eu(e.height)&&eu(e.x)&&eu(e.y),eu=e=>!isNaN(e)&&isFinite(e),ec=(e,t)=>{},ef=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),eh=({x:e,y:t},[n,o,r],i=!1,a=[1,1])=>{let l={x:(e-n)/r,y:(t-o)/r};return i?ef(l,a):l},eg=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o});function ep(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let em=(e,t,n,o,r,i)=>{let a=function(e,t,n){if("string"==typeof e||"number"==typeof e){let o=ep(e,n),r=ep(e,t);return{top:o,right:r,bottom:o,left:r,x:2*r,y:2*o}}if("object"==typeof e){let o=ep(e.top??e.y??0,n),r=ep(e.bottom??e.y??0,n),i=ep(e.left??e.x??0,t),a=ep(e.right??e.x??0,t);return{top:o,right:a,bottom:r,left:i,x:i+a,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),l=Q(Math.min((t-a.x)/e.width,(n-a.y)/e.height),o,r),s=e.x+e.width/2,d=e.y+e.height/2,u=t/2-s*l,c=n/2-d*l,f=function(e,t,n,o,r,i){let{x:a,y:l}=eg(e,[t,n,o]),{x:s,y:d}=eg({x:e.x+e.width,y:e.y+e.height},[t,n,o]);return{left:Math.floor(a),top:Math.floor(l),right:Math.floor(r-s),bottom:Math.floor(i-d)}}(e,u,c,l,t,n),h={left:Math.min(f.left-a.left,0),top:Math.min(f.top-a.top,0),right:Math.min(f.right-a.right,0),bottom:Math.min(f.bottom-a.bottom,0)};return{x:u-h.left+h.right,y:c-h.top+h.bottom,zoom:l}},ey=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function ex(e){return null!=e&&"parent"!==e}function ev(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function eb(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function ew(e,t={width:0,height:0},n,o,r){let i={...e},a=o.get(n);if(a){let e=a.origin||r;i.x+=a.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=a.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function eS(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function eE(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){let{x:i,y:a}=eP(e),l=eh({x:i-(r?.left??0),y:a-(r?.top??0)},o),{x:s,y:d}=n?ef(l,t):l;return{xSnapped:s,ySnapped:d,...l}}let eM=e=>({width:e.offsetWidth,height:e.offsetHeight}),eC=e=>e?.getRootNode?.()||window?.document,eN=["INPUT","SELECT","TEXTAREA"];function ek(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(eN.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let eP=(e,t)=>{let n="clientX"in e,o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},ej=(e,t,n,o,r)=>{let i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{let i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...eM(t)}}):null};function eI({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){let s=.125*e+.375*r+.375*a+.125*n,d=.125*t+.375*i+.375*l+.125*o,u=Math.abs(s-e),c=Math.abs(d-t);return[s,d,u,c]}function eD(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function e$({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case g.Left:return[t-eD(t-o,i),n];case g.Right:return[t+eD(o-t,i),n];case g.Top:return[t,n-eD(n-r,i)];case g.Bottom:return[t,n+eD(r-n,i)]}}function eA({sourceX:e,sourceY:t,sourcePosition:n=g.Bottom,targetX:o,targetY:r,targetPosition:i=g.Top,curvature:a=.25}){let[l,s]=e$({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[d,u]=e$({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[c,f,h,p]=eI({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:l,sourceControlY:s,targetControlX:d,targetControlY:u});return[`M${e},${t} C${l},${s} ${d},${u} ${o},${r}`,c,f,h,p]}function eR({sourceX:e,sourceY:t,targetX:n,targetY:o}){let r=Math.abs(n-e)/2,i=Math.abs(o-t)/2;return[n<e?n+r:n-r,o<t?o+i:o-i,r,i]}function e_({sourceX:e,sourceY:t,targetX:n,targetY:o}){let[r,i,a,l]=eR({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,l]}let ez={[g.Left]:{x:-1,y:0},[g.Right]:{x:1,y:0},[g.Top]:{x:0,y:-1},[g.Bottom]:{x:0,y:1}},eL=({source:e,sourcePosition:t=g.Bottom,target:n})=>t===g.Left||t===g.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},eO=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function eB({sourceX:e,sourceY:t,sourcePosition:n=g.Bottom,targetX:o,targetY:r,targetPosition:i=g.Top,borderRadius:a=5,centerX:l,centerY:s,offset:d=20,stepPosition:u=.5}){let[c,f,h,p,m]=function({source:e,sourcePosition:t=g.Bottom,target:n,targetPosition:o=g.Top,center:r,offset:i,stepPosition:a}){let l,s,d=ez[t],u=ez[o],c={x:e.x+d.x*i,y:e.y+d.y*i},f={x:n.x+u.x*i,y:n.y+u.y*i},h=eL({source:c,sourcePosition:t,target:f}),p=0!==h.x?"x":"y",m=h[p],y=[],x={x:0,y:0},v={x:0,y:0},[,,b,w]=eR({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(d[p]*u[p]==-1){"x"===p?(l=r.x??c.x+(f.x-c.x)*a,s=r.y??(c.y+f.y)/2):(l=r.x??(c.x+f.x)/2,s=r.y??c.y+(f.y-c.y)*a);let e=[{x:l,y:c.y},{x:l,y:f.y}],t=[{x:c.x,y:s},{x:f.x,y:s}];y=d[p]===m?"x"===p?e:t:"x"===p?t:e}else{let r=[{x:c.x,y:f.y}],a=[{x:f.x,y:c.y}];if(y="x"===p?d.x===m?a:r:d.y===m?r:a,t===o){let t=Math.abs(e[p]-n[p]);if(t<=i){let o=Math.min(i-1,i-t);d[p]===m?x[p]=(c[p]>e[p]?-1:1)*o:v[p]=(f[p]>n[p]?-1:1)*o}}if(t!==o){let e="x"===p?"y":"x",t=d[p]===u[e],n=c[e]>f[e],o=c[e]<f[e];(1===d[p]&&(!t&&n||t&&o)||1!==d[p]&&(!t&&o||t&&n))&&(y="x"===p?r:a)}let h={x:c.x+x.x,y:c.y+x.y},g={x:f.x+v.x,y:f.y+v.y};Math.max(Math.abs(h.x-y[0].x),Math.abs(g.x-y[0].x))>=Math.max(Math.abs(h.y-y[0].y),Math.abs(g.y-y[0].y))?(l=(h.x+g.x)/2,s=y[0].y):(l=y[0].x,s=(h.y+g.y)/2)}return[[e,{x:c.x+x.x,y:c.y+x.y},...y,{x:f.x+v.x,y:f.y+v.y},n],l,s,b,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:l,y:s},offset:d,stepPosition:u});return[c.reduce((e,t,n)=>e+(n>0&&n<c.length-1?function(e,t,n,o){let r=Math.min(eO(e,t)/2,eO(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){let t=e.x<n.x?-1:1,o=e.y<n.y?1:-1;return`L ${i+r*t},${a}Q ${i},${a} ${i},${a+r*o}`}let l=e.x<n.x?1:-1,s=e.y<n.y?-1:1;return`L ${i},${a+r*s}Q ${i},${a} ${i+r*l},${a}`}(c[n-1],t,c[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`),""),f,h,p,m]}function eH(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function eT(e){if(!e)return null;let t=[],n=[];for(let o of e)o.width=o.width??1,o.height=o.height??1,"source"===o.type?t.push(o):"target"===o.type&&n.push(o);return{source:t,target:n}}function eV(e,t,n=g.Left,o=!1){let r=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:l}=t??ev(e);if(o)return{x:r+a/2,y:i+l/2};switch(t?.position??n){case g.Top:return{x:r+a/2,y:i};case g.Right:return{x:r+a,y:i+l/2};case g.Bottom:return{x:r+a/2,y:i+l};case g.Left:return{x:r,y:i+l/2}}}function eF(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function eZ(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}let eX={nodeOrigin:[0,0],nodeExtent:L,elevateNodesOnSelect:!0,defaults:{}},eY={...eX,checkEquality:!0};function eK(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function eW(e,t,n,o){let r=eK(eY,o),i={i:-1},a=e.length>0,l=new Map(t),s=1e3*!!r?.elevateNodesOnSelect;for(let d of(t.clear(),n.clear(),e)){let e=l.get(d.id);if(r.checkEquality&&d===e?.internals.userNode)t.set(d.id,e);else{let n=G(X(d,r.nodeOrigin),ex(d.extent)?d.extent:r.nodeExtent,ev(d));e={...r.defaults,...d,measured:{width:d.measured?.width,height:d.measured?.height},internals:{positionAbsolute:n,handleBounds:function(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;let n=[],o=[];for(let t of e.handles){let r={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(r):"target"===t.type&&o.push(r)}return{source:n,target:o}}(d,e),z:eq(d,s),userNode:d}},t.set(d.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(a=!1),d.parentId&&eU(e,t,n,o,i)}return a}function eU(e,t,n,o,r){let{elevateNodesOnSelect:i,nodeOrigin:a,nodeExtent:l}=eK(eX,o),s=e.parentId,d=t.get(s);if(!d)return void console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n),r&&!d.parentId&&void 0===d.internals.rootParentIndex&&(d.internals.rootParentIndex=++r.i,d.internals.z=d.internals.z+10*r.i),r&&void 0!==d.internals.rootParentIndex&&(r.i=d.internals.rootParentIndex);let{x:u,y:c,z:f}=function(e,t,n,o,r){let{x:i,y:a}=t.internals.positionAbsolute,l=ev(e),s=X(e,n),d=ex(e.extent)?G(s,e.extent,l):s,u=G({x:i+d.x,y:a+d.y},o,l);"parent"===e.extent&&(u=J(u,l,t));let c=eq(e,r),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>=c?f+1:c}}(e,d,a,l,1e3*!!i),{positionAbsolute:h}=e.internals,g=u!==h.x||c!==h.y;(g||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:u,y:c}:h,z:f}})}function eq(e,t){return(eu(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function eQ(e,t,n,o=[0,0]){let r=[],i=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let o=el(i.get(n.parentId)?.expandedRect??ei(e),n.rect);i.set(n.parentId,{expandedRect:o,parent:e})}return i.size>0&&i.forEach(({expandedRect:t,parent:i},a)=>{let l=i.internals.positionAbsolute,s=ev(i),d=i.origin??o,u=t.x<l.x?Math.round(Math.abs(l.x-t.x)):0,c=t.y<l.y?Math.round(Math.abs(l.y-t.y)):0,f=Math.max(s.width,Math.round(t.width)),h=Math.max(s.height,Math.round(t.height)),g=(f-s.width)*d[0],p=(h-s.height)*d[1];(u>0||c>0||g||p)&&(r.push({id:a,type:"position",position:{x:i.position.x-u+g,y:i.position.y-c+p}}),n.get(a)?.forEach(t=>{e.some(e=>e.id===t.id)||r.push({id:t.id,type:"position",position:{x:t.position.x+u,y:t.position.y+c}})})),(s.width<t.width||s.height<t.height||u||c)&&r.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:f+(u?d[0]*u-g:0),height:h+(c?d[1]*c-p:0)}})}),r}async function eG({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o);return Promise.resolve(!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]))}function eJ(e,t,n,o,r,i){let a=r,l=o.get(a)||new Map;o.set(a,l.set(n,t)),a=`${r}-${e}`;let s=o.get(a)||new Map;if(o.set(a,s.set(n,t)),i){a=`${r}-${e}-${i}`;let l=o.get(a)||new Map;o.set(a,l.set(n,t))}}function e0(e,t,n){for(let o of(e.clear(),t.clear(),n)){let{source:n,target:r,sourceHandle:i=null,targetHandle:a=null}=o,l={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:a},s=`${n}-${i}--${r}-${a}`;eJ("source",l,`${r}-${a}--${n}-${i}`,e,n,i),eJ("target",l,s,e,r,a),t.set(o.id,o)}}function e1(e,t,n){let o=e;do{if(o?.matches?.(t))return!0;if(o===n)break;o=o?.parentElement}while(o)return!1}function e2({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){let r=[];for(let[e,i]of t){let t=n.get(e)?.internals.userNode;t&&r.push({...t,position:i.position,dragging:o})}if(!e)return[r[0],r];let i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:o}:r[0],r]}function e3(e,t,n,o,r,i=!1){let a=o.get(e);if(!a)return null;let l="strict"===r?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],s=(n?l?.find(e=>e.id===n):l?.[0])??null;return s&&i?{...s,...eV(a,s,s.position,!0)}:s}function e5(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}let e4=()=>!0;function e6(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:l,flowId:s,isValidConnection:u=e4,nodeLookup:c}){let f="target"===i,h=t?a.querySelector(`.${l}-flow__handle[data-id="${s}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:p}=eP(e),m=a.elementFromPoint(g,p),y=m?.classList.contains(`${l}-flow__handle`)?m:h,x={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){let e=e5(void 0,y),t=y.getAttribute("data-nodeid"),i=y.getAttribute("data-handleid"),a=y.classList.contains("connectable"),l=y.classList.contains("connectableend");if(!t||!e)return x;let s={source:f?t:o,sourceHandle:f?i:r,target:f?o:t,targetHandle:f?r:i};x.connection=s,x.isValid=a&&l&&(n===d.Strict?f&&"source"===e||!f&&"target"===e:t!==o||i!==r)&&u(s),x.toHandle=e3(t,e,i,c,n,!0)}return x}let e7=function(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:a,domNode:l,nodeLookup:s,lib:d,autoPanOnConnect:u,flowId:c,panBy:f,cancelConnection:h,onConnectStart:p,onConnect:m,onConnectEnd:y,isValidConnection:x=e4,onReconnectEnd:v,updateConnection:b,getTransform:w,getFromHandle:S,autoPanSpeed:E,dragThreshold:M=1,handleDomNode:C}){let N,k=eC(e.target),P=0,{x:j,y:I}=eP(e),D=e5(i,C),$=l?.getBoundingClientRect(),A=!1;if(!$||!D)return;let R=e3(r,D,o,s,t);if(!R)return;let _=eP(e,$),z=!1,L=null,O=!1,B=null,H={...R,nodeId:r,type:D,position:R.position},V=s.get(r),F={inProgress:!0,isValid:null,from:eV(V,H,g.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:V,to:_,toHandle:null,toPosition:T[H.position],toNode:null};function Z(){A=!0,b(F),p?.(e,{nodeId:r,handleId:o,handleType:D})}function X(e){var i,l;let h;if(!A){let{x:t,y:n}=eP(e),o=t-j,r=n-I;if(!(o*o+r*r>M*M))return;Z()}if(!S()||!H)return void Y(e);let g=w();N=function(e,t,n,o){let r=[],i=1/0;for(let a of function(e,t,n){let o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())es(r,ei(e))>0&&o.push(e);return o}(e,n,t+250))for(let n of[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]]){if(o.nodeId===n.nodeId&&o.type===n.type&&o.id===n.id)continue;let{x:l,y:s}=eV(a,n,n.position,!0),d=Math.sqrt(Math.pow(l-e.x,2)+Math.pow(s-e.y,2));d>t||(d<i?(r=[{...n,x:l,y:s}],i=d):d===i&&r.push({...n,x:l,y:s}))}if(!r.length)return null;if(r.length>1){let e="source"===o.type?"target":"source";return r.find(t=>t.type===e)??r[0]}return r[0]}(eh(_=eP(e,$),g,!1,[1,1]),n,s,H),z||(!function e(){if(!u||!$)return;let[t,n]=et(_,$,E);f({x:t,y:n}),P=requestAnimationFrame(e)}(),z=!0);let p=e6(e,{handle:N,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:a?"target":"source",isValidConnection:x,doc:k,lib:d,flowId:c,nodeLookup:s});B=p.handleDomNode,L=p.connection,i=!!N,l=p.isValid,h=null,l?h=!0:i&&!l&&(h=!1),O=h;let m={...F,isValid:O,to:p.toHandle&&O?eg({x:p.toHandle.x,y:p.toHandle.y},g):_,toHandle:p.toHandle,toPosition:O&&p.toHandle?p.toHandle.position:T[H.position],toNode:p.toHandle?s.get(p.toHandle.nodeId):null};O&&N&&F.toHandle&&m.toHandle&&F.toHandle.type===m.toHandle.type&&F.toHandle.nodeId===m.toHandle.nodeId&&F.toHandle.id===m.toHandle.id&&F.to.x===m.to.x&&F.to.y===m.to.y||(b(m),F=m)}function Y(e){if(!("touches"in e)||!(e.touches.length>0)){if(A){(N||B)&&L&&O&&m?.(L);let{inProgress:t,...n}=F,o={...n,toPosition:F.toHandle?F.toPosition:null};y?.(e,o),i&&v?.(e,o)}h(),cancelAnimationFrame(P),z=!1,O=!1,L=null,B=null,k.removeEventListener("mousemove",X),k.removeEventListener("mouseup",Y),k.removeEventListener("touchmove",X),k.removeEventListener("touchend",Y)}}0===M&&Z(),k.addEventListener("mousemove",X),k.addEventListener("mouseup",Y),k.addEventListener("touchmove",X),k.addEventListener("touchend",Y)},e8=e=>({x:e.x,y:e.y,zoom:e.k}),e9=({x:e,y:t,zoom:n})=>A.identity.translate(e,t).scale(n),te=(e,t)=>e.target.closest(`.${t}`),tt=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),tn=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,to=(e,t=0,n=tn,o=()=>{})=>{let r="number"==typeof t&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e},tr=e=>{let t=e.ctrlKey&&ey()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function ti(e){let t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:e.includes("left"),affectsY:e.includes("top")}}function ta(e,t){return Math.max(0,t-e)}function tl(e,t){return Math.max(0,e-t)}function ts(e,t,n){return Math.max(0,t-e,e-n)}(l=p||(p={})).Line="line",l.Handle="handle";let td={width:0,height:0,x:0,y:0},tu={...td,pointerX:0,pointerY:0,aspectRatio:1};var tc=e.i(596177);let tf={get url(){return`file://${e.P("node_modules/.pnpm/zustand@4.5.7_@types+react@19.2.2_immer@10.1.3_react@19.2.0/node_modules/zustand/esm/vanilla.mjs")}`}},th=e=>{let t,n=new Set,o=(e,o)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=o?o:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(tf.env?tf.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,i);return i},{useDebugValue:tg}=x.default,{useSyncExternalStoreWithSelector:tp}=tc.default,tm=e=>e;function ty(e,t=tm,n){let o=tp(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return tg(o),o}let tx=(e,t)=>{let n=e?th(e):th,o=(e,o=t)=>ty(n,e,o);return Object.assign(o,n),o};function tv(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}e.i(144674);let tb=(0,x.createContext)(null),tw=tb.Provider,tS="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function tE(e,t){let n=(0,x.useContext)(tb);if(null===n)throw Error(tS);return ty(n,e,t)}function tM(){let e=(0,x.useContext)(tb);if(null===e)throw Error(tS);return(0,x.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let tC={display:"none"},tN={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},tk="react-flow__node-desc",tP="react-flow__edge-desc",tj=e=>e.ariaLiveMessage,tI=e=>e.ariaLabelConfig;function tD({rfId:e}){let t=tE(tj);return(0,y.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:tN,children:t})}function t$({rfId:e,disableKeyboardA11y:t}){let n=tE(tI);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{id:`${tk}-${e}`,style:tC,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,y.jsx)("div",{id:`${tP}-${e}`,style:tC,children:n["edge.a11yDescription.default"]}),!t&&(0,y.jsx)(tD,{rfId:e})]})}let tA=(0,x.forwardRef)(({position:e="top-left",children:t,className:n,style:o,...r},i)=>{let a=`${e}`.split("-");return(0,y.jsx)("div",{className:v(["react-flow__panel",n,...a]),style:o,ref:i,...r,children:t})});function tR({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,y.jsx)(tA,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,y.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}tA.displayName="Panel";let t_=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},tz=e=>e.id;function tL(e,t){return tv(e.selectedNodes.map(tz),t.selectedNodes.map(tz))&&tv(e.selectedEdges.map(tz),t.selectedEdges.map(tz))}function tO({onSelectionChange:e}){let t=tM(),{selectedNodes:n,selectedEdges:o}=tE(t_,tL);return(0,x.useEffect)(()=>{let r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChangeHandlers.forEach(e=>e(r))},[n,o,e]),null}let tB=e=>!!e.onSelectionChangeHandlers;function tH({onSelectionChange:e}){let t=tE(tB);return e||t?(0,y.jsx)(tO,{onSelectionChange:e}):null}let tT=[0,0],tV={x:0,y:0,zoom:1},tF=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","rfId"],tZ=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),tX={translateExtent:L,nodeOrigin:tT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function tY(e){let{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:a,reset:l,setDefaultNodesAndEdges:s}=tE(tZ,tv),d=tM();(0,x.useEffect)(()=>(s(e.defaultNodes,e.defaultEdges),()=>{u.current=tX,l()}),[]);let u=(0,x.useRef)(tX);return(0,x.useEffect)(()=>{for(let l of tF){let s=e[l];if(s!==u.current[l]&&void 0!==e[l])if("nodes"===l)t(s);else if("edges"===l)n(s);else if("minZoom"===l)o(s);else if("maxZoom"===l)r(s);else if("translateExtent"===l)i(s);else if("nodeExtent"===l)a(s);else if("ariaLabelConfig"===l)d.setState({ariaLabelConfig:{...B,...s||{}}});else"fitView"===l?d.setState({fitViewQueued:s}):"fitViewOptions"===l?d.setState({fitViewOptions:s}):d.setState({[l]:s})}u.current=e},tF.map(t=>e[t])),null}function tK(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}let tW="undefined"!=typeof document?document:null;function tU(e=null,t={target:tW,actInsideInputWithModifier:!0}){let[n,o]=(0,x.useState)(!1),r=(0,x.useRef)(!1),i=(0,x.useRef)(new Set([])),[a,l]=(0,x.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,x.useEffect)(()=>{let n=t?.target??tW,s=t?.actInsideInputWithModifier??!0;if(null!==e){let e=e=>{if(r.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!r.current||r.current&&!s)&&ek(e))return!1;let n=tQ(e.code,l);if(i.current.add(e[n]),tq(a,i.current,!1)){let n=e.composedPath?.()?.[0]||e.target,i=n?.nodeName==="BUTTON"||n?.nodeName==="A";!1!==t.preventDefault&&(r.current||!i)&&e.preventDefault(),o(!0)}},d=e=>{let t=tQ(e.code,l);tq(a,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(e[t]),"Meta"===e.key&&i.current.clear(),r.current=!1},u=()=>{i.current.clear(),o(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,o]),n}function tq(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function tQ(e,t){return t.includes(e)?"code":"key"}function tG(e,t){let n=[],o=new Map,r=[];for(let t of e)if("add"===t.type){r.push(t);continue}else if("remove"===t.type||"replace"===t.type)o.set(t.id,[t]);else{let e=o.get(t.id);e?e.push(t):o.set(t.id,[t])}for(let e of t){let t=o.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let r={...e};for(let e of t){var i=e,a=r;switch(i.type){case"select":a.selected=i.selected;break;case"position":void 0!==i.position&&(a.position=i.position),void 0!==i.dragging&&(a.dragging=i.dragging);break;case"dimensions":void 0!==i.dimensions&&(a.measured??={},a.measured.width=i.dimensions.width,a.measured.height=i.dimensions.height,i.setAttributes&&((!0===i.setAttributes||"width"===i.setAttributes)&&(a.width=i.dimensions.width),(!0===i.setAttributes||"height"===i.setAttributes)&&(a.height=i.dimensions.height))),"boolean"==typeof i.resizing&&(a.resizing=i.resizing)}}n.push(r)}return r.length&&r.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function tJ(e,t){return{id:e,type:"select",selected:t}}function t0(e,t=new Set,n=!1){let o=[];for(let[r,i]of e){let e=t.has(r);(void 0!==i.selected||e)&&i.selected!==e&&(n&&(i.selected=e),o.push(tJ(i.id,e)))}return o}function t1({items:e=[],lookup:t}){let n=[],o=new Map(e.map(e=>[e.id,e]));for(let[o,r]of e.entries()){let e=t.get(r.id),i=e?.internals?.userNode??e;void 0!==i&&i!==r&&n.push({id:r.id,item:r,type:"replace"}),void 0===i&&n.push({item:r,type:"add",index:o})}for(let[e]of t)void 0===o.get(e)&&n.push({id:e,type:"remove"});return n}function t2(e){return{id:e.id,type:"remove"}}let t3=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e);function t5(e){return(0,x.forwardRef)(e)}let t4="undefined"!=typeof window?x.useLayoutEffect:x.useEffect;function t6(e){let[t,n]=(0,x.useState)(BigInt(0)),[o]=(0,x.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return t4(()=>{let t=o.get();t.length&&(e(t),o.reset())},[t]),o}let t7=(0,x.createContext)(null);function t8({children:e}){let t=tM(),n=t6((0,x.useCallback)(e=>{let{nodes:n=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:a,fitViewQueued:l}=t.getState(),s=n;for(let t of e)s="function"==typeof t?t(s):t;let d=t1({items:s,lookup:a});r&&o(s),d.length>0?i?.(d):l&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:n,setNodes:o}=t.getState();e&&o(n)})},[])),o=t6((0,x.useCallback)(e=>{let{edges:n=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:a}=t.getState(),l=n;for(let t of e)l="function"==typeof t?t(l):t;r?o(l):i&&i(t1({items:l,lookup:a}))},[])),r=(0,x.useMemo)(()=>({nodeQueue:n,edgeQueue:o}),[]);return(0,y.jsx)(t7.Provider,{value:r,children:e})}let t9=e=>!!e.panZoom;function ne(){let e,t=(e=tM(),(0,x.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[o,r,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>e.getState().setCenter(t,n,o),fitBounds:async(t,n)=>{let{width:o,height:r,minZoom:i,maxZoom:a,panZoom:l}=e.getState(),s=em(t,o,r,i,a,n?.padding??.1);return l?(await l.setViewport(s,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:o,snapGrid:r,snapToGrid:i,domNode:a}=e.getState();if(!a)return t;let{x:l,y:s}=a.getBoundingClientRect(),d={x:t.x-l,y:t.y-s},u=n.snapGrid??r;return eh(d,o,n.snapToGrid??i,u)},flowToScreenPosition:t=>{let{transform:n,domNode:o}=e.getState();if(!o)return t;let{x:r,y:i}=o.getBoundingClientRect(),a=eg(t,n);return{x:a.x+r,y:a.y+i}}}),[])),n=tM(),o=function(){let e=(0,x.useContext)(t7);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),r=tE(t9),i=(0,x.useMemo)(()=>{let e=e=>n.getState().nodeLookup.get(e),t=e=>{o.nodeQueue.push(e)},r=e=>{o.edgeQueue.push(e)},i=e=>{let{nodeLookup:t,nodeOrigin:o}=n.getState(),r=t3(e)?e:t.get(e.id),i=r.parentId?ew(r.position,r.measured,r.parentId,t,o):r.position;return ei({...r,position:i,width:r.measured?.width??r.width,height:r.measured?.height??r.height})},a=(e,n,o={replace:!1})=>{t(t=>t.map(t=>{if(t.id===e){let e="function"==typeof n?n(t):n;return o.replace&&t3(e)?e:{...t,...e}}return t}))},l=(e,t,n={replace:!1})=>{r(o=>o.map(o=>{if(o.id===e){let e="function"==typeof t?t(o):t;return n.replace&&F(e)?e:{...o,...e}}return o}))};return{getNodes:()=>n.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{let{edges:e=[]}=n.getState();return e.map(e=>({...e}))},getEdge:e=>n.getState().edgeLookup.get(e),setNodes:t,setEdges:r,addNodes:e=>{let t=Array.isArray(e)?e:[e];o.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];o.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:t=[],transform:o}=n.getState(),[r,i,a]=o;return{nodes:e.map(e=>({...e})),edges:t.map(e=>({...e})),viewport:{x:r,y:i,zoom:a}}},deleteElements:async({nodes:e=[],edges:t=[]})=>{let{nodes:o,edges:r,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:l,triggerEdgeChanges:s,onDelete:d,onBeforeDelete:u}=n.getState(),{nodes:c,edges:f}=await q({nodesToRemove:e,edgesToRemove:t,nodes:o,edges:r,onBeforeDelete:u}),h=f.length>0,g=c.length>0;if(h){let e=f.map(t2);a?.(f),s(e)}if(g){let e=c.map(t2);i?.(c),l(e)}return(g||h)&&d?.({nodes:c,edges:f}),{deletedNodes:c,deletedEdges:f}},getIntersectingNodes:(e,t=!0,o)=>{let r=ed(e),a=r?e:i(e),l=void 0!==o;return a?(o||n.getState().nodes).filter(o=>{let i=n.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;let s=ei(l?o:i),d=es(s,a);return t&&d>0||d>=s.width*s.height||d>=a.width*a.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{let o=ed(e)?e:i(e);if(!o)return!1;let r=es(o,t);return n&&r>0||r>=t.width*t.height||r>=o.width*o.height},updateNode:a,updateNodeData:(e,t,n={replace:!1})=>{a(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},updateEdge:l,updateEdgeData:(e,t,n={replace:!1})=>{l(e,e=>{let o="function"==typeof t?t(e):t;return n.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},n)},getNodesBounds:e=>{let{nodeLookup:t,nodeOrigin:o}=n.getState();return((e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:er(e.reduce((e,n)=>{let o="string"==typeof n,r=t.nodeLookup||o?void 0:n;return t.nodeLookup&&(r=o?t.nodeLookup.get(n):Z(n)?n:t.nodeLookup.get(n.id)),en(e,r?ea(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})))(e,{nodeLookup:t,nodeOrigin:o})},getHandleConnections:({type:e,id:t,nodeId:o})=>Array.from(n.getState().connectionLookup.get(`${o}-${e}${t?`-${t}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:t,nodeId:o})=>Array.from(n.getState().connectionLookup.get(`${o}${e?t?`-${e}-${t}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{let t,r,i=n.getState().fitViewResolver??{promise:new Promise((e,n)=>{t=e,r=n}),resolve:t,reject:r};return n.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:i}),o.nodeQueue.push(e=>[...e]),i.promise}}},[]);return(0,x.useMemo)(()=>({...i,...t,viewportInitialized:r}),[r])}let nt=e=>e.selected,nn="undefined"!=typeof window?window:void 0,no={position:"absolute",width:"100%",height:"100%",top:0,left:0},nr=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function ni({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=u.Free,zoomOnDoubleClick:a=!0,panOnDrag:l=!0,defaultViewport:s,translateExtent:d,minZoom:c,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:g=!0,children:p,noWheelClassName:m,noPanClassName:v,onViewportChange:b,isControlledViewport:E,paneClickDistance:M,selectionOnDrag:C}){let N,k=tM(),P=(0,x.useRef)(null),{userSelectionActive:j,lib:I,connectionInProgress:D}=tE(nr,tv),A=tU(h),L=(0,x.useRef)();N=tM(),(0,x.useEffect)(()=>{let e=()=>{if(!P.current||!(P.current.checkVisibility?.()??!0))return!1;let e=eM(P.current);(0===e.height||0===e.width)&&N.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),N.setState({width:e.width||500,height:e.height||500})};if(P.current){e(),window.addEventListener("resize",e);let t=new ResizeObserver(()=>e());return t.observe(P.current),()=>{window.removeEventListener("resize",e),t&&P.current&&t.unobserve(P.current)}}},[]);let O=(0,x.useCallback)(e=>{b?.({x:e[0],y:e[1],zoom:e[2]}),E||k.setState({transform:e})},[b,E]);return(0,x.useEffect)(()=>{if(P.current){L.current=function({domNode:e,minZoom:t,maxZoom:n,translateExtent:o,viewport:r,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:s}){let d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),f=(0,$.default)().scaleExtent([t,n]).translateExtent(o),h=(0,w.select)(e).call(f);x({x:r.x,y:r.y,zoom:Q(r.zoom,t,n)},[[0,0],[c.width,c.height]],o);let g=h.on("wheel.zoom"),p=h.on("dblclick.zoom");function m(e,t){return h?new Promise(n=>{f?.interpolate(t?.interpolate==="linear"?z.interpolate:_.interpolateZoom).transform(to(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function y(){f.on("zoom",null)}async function x(e,t,n){let o=e9(e),r=f?.constrain()(o,t,n);return r&&await m(r),new Promise(e=>e(r))}return f.wheelDelta(tr),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:o,panOnScroll:r,panOnDrag:c,panOnScrollMode:m,panOnScrollSpeed:x,preventScrolling:v,zoomOnPinch:b,zoomOnScroll:w,zoomOnDoubleClick:E,zoomActivationKeyPressed:M,lib:C,onTransformChange:N,connectionInProgress:k,paneClickDistance:P,selectionOnDrag:j}){o&&!d.isZoomingOrPanning&&y();let I=r&&!M&&!o;f.clickDistance(j?1/0:!eu(P)||P<0?0:P);let D=I?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:l,onPanZoom:s,onPanZoomEnd:d}){return c=>{if(te(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();let f=n.property("__zoom").k||1;if(c.ctrlKey&&a){let e=(0,S.pointer)(c),t=f*Math.pow(2,tr(c));o.scaleTo(n,t,e,c);return}let h=1===c.deltaMode?20:1,g=r===u.Vertical?0:c.deltaX*h,p=r===u.Horizontal?0:c.deltaY*h;!ey()&&c.shiftKey&&r!==u.Vertical&&(g=c.deltaY*h,p=0),o.translateBy(n,-(g/f)*i,-(p/f)*i,{internal:!0});let m=e8(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(s?.(c,m),e.panScrollTimeout=setTimeout(()=>{d?.(c,m),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l?.(c,m))}}({zoomPanValues:d,noWheelClassName:e,d3Selection:h,d3Zoom:f,panOnScrollMode:m,panOnScrollSpeed:x,zoomOnPinch:b,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){let i="wheel"===o.type,a=!t&&i&&!o.ctrlKey,l=te(o,e);if(o.ctrlKey&&i&&l&&o.preventDefault(),a||l)return null;o.preventDefault(),n.call(this,o,r)}}({noWheelClassName:e,preventScrolling:v,d3ZoomHandler:g});if(h.on("wheel.zoom",D,{passive:!1}),!o){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;let r=e8(o.transform);e.mouseButton=o.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=r,o.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(o.sourceEvent,r)}}({zoomPanValues:d,onDraggingChange:s,onPanZoomStart:a});f.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{e.usedRightMouseButton=!!(n&&tt(t,e.mouseButton??0)),i.sourceEvent?.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!i.sourceEvent?.internal&&r?.(i.sourceEvent,e8(i.transform))}}({zoomPanValues:d,panOnDrag:c,onPaneContextMenu:!!n,onPanZoom:i,onTransformChange:N});f.on("zoom",t);let o=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return a=>{if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&tt(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,o(!1),r)){let t=e8(a.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r?.(a.sourceEvent,t)},150*!!n)}}}({zoomPanValues:d,panOnDrag:c,panOnScroll:r,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:s});f.on("end",o)}let $=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:l,noPanClassName:s,lib:d,connectionInProgress:u}){return c=>{let f=e||t,h=n&&c.ctrlKey,g="wheel"===c.type;if(1===c.button&&"mousedown"===c.type&&(te(c,`${d}-flow__node`)||te(c,`${d}-flow__edge`)))return!0;if(!o&&!f&&!r&&!i&&!n||a||u&&!g||te(c,l)&&g||te(c,s)&&(!g||r&&g&&!e)||!n&&c.ctrlKey&&g)return!1;if(!n&&"touchstart"===c.type&&c.touches?.length>1)return c.preventDefault(),!1;if(!f&&!r&&!h&&g||!o&&("mousedown"===c.type||"touchstart"===c.type)||Array.isArray(o)&&!o.includes(c.button)&&"mousedown"===c.type)return!1;let p=Array.isArray(o)&&o.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||g)&&p}}({zoomActivationKeyPressed:M,panOnDrag:c,zoomOnScroll:w,panOnScroll:r,zoomOnDoubleClick:E,zoomOnPinch:b,userSelectionActive:o,noPanClassName:t,noWheelClassName:e,lib:C,connectionInProgress:k});f.filter($),E?h.on("dblclick.zoom",p):h.on("dblclick.zoom",null)},destroy:y,setViewport:async function e(e,t){let n=e9(e);return await m(n,t),new Promise(e=>e(n))},setViewportConstrained:x,getViewport:function(){let e=h?(0,R.default)(h.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return h?new Promise(n=>{f?.interpolate(t?.interpolate==="linear"?z.interpolate:_.interpolateZoom).scaleTo(to(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return h?new Promise(n=>{f?.interpolate(t?.interpolate==="linear"?z.interpolate:_.interpolateZoom).scaleBy(to(h,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){f?.scaleExtent(e)},setTranslateExtent:function(e){f?.translateExtent(e)},syncViewport:function(e){if(h){let t=e9(e),n=h.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&f?.transform(h,t,null,{sync:!0})}},setClickDistance:function(e){let t=!eu(e)||e<0?0:e;f?.clickDistance(t)}}}({domNode:P.current,minZoom:c,maxZoom:f,translateExtent:d,viewport:s,onDraggingChange:e=>k.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:o}=k.getState();o?.(e,t),n?.(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:o}=k.getState();o?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:o}=k.getState();o?.(e,t),n?.(t)}});let{x:e,y:t,zoom:n}=L.current.getViewport();return k.setState({panZoom:L.current,transform:[e,t,n],domNode:P.current.closest(".react-flow")}),()=>{L.current?.destroy()}}},[]),(0,x.useEffect)(()=>{L.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:a,panOnDrag:l,zoomActivationKeyPressed:A,preventScrolling:g,noPanClassName:v,userSelectionActive:j,noWheelClassName:m,lib:I,onTransformChange:O,connectionInProgress:D,selectionOnDrag:C,paneClickDistance:M})},[e,t,n,o,r,i,a,l,A,g,v,j,m,I,O,D,C,M]),(0,y.jsx)("div",{className:"react-flow__renderer",ref:P,style:no,children:p})}let na=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function nl(){let{userSelectionActive:e,userSelectionRect:t}=tE(na,tv);return e&&t?(0,y.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}let ns=(e,t)=>n=>{n.target===t.current&&e?.(n)},nd=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function nu({isSelecting:e,selectionKeyPressed:t,selectionMode:n=c.Full,panOnDrag:o,paneClickDistance:r,selectionOnDrag:i,onSelectionStart:a,onSelectionEnd:l,onPaneClick:s,onPaneContextMenu:d,onPaneScroll:u,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:g,children:p}){let m=tM(),{userSelectionActive:b,elementsSelectable:w,dragging:S,connectionInProgress:E}=tE(nd,tv),M=w&&(e||b),C=(0,x.useRef)(null),N=(0,x.useRef)(),k=(0,x.useRef)(new Set),P=(0,x.useRef)(new Set),j=(0,x.useRef)(!1),I=e=>{if(j.current||E){j.current=!1;return}s?.(e),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},D=!0===o||Array.isArray(o)&&o.includes(0);return(0,y.jsxs)("div",{className:v(["react-flow__pane",{draggable:D,dragging:S,selection:e}]),onClick:M?void 0:ns(I,C),onContextMenu:ns(e=>{Array.isArray(o)&&o?.includes(2)?e.preventDefault():d?.(e)},C),onWheel:ns(u?e=>u(e):void 0,C),onPointerEnter:M?void 0:f,onPointerMove:M?e=>{let{userSelectionRect:o,transform:i,nodeLookup:l,edgeLookup:s,connectionLookup:d,triggerNodeChanges:u,triggerEdgeChanges:f,defaultEdgeOptions:h,resetSelectedElements:g}=m.getState();if(!N.current||!o)return;let{x:p,y:y}=eP(e.nativeEvent,N.current),{startX:x,startY:v}=o;if(!j.current){if(Math.hypot(p-x,y-v)<=(t?0:r))return;g(),a?.(e)}j.current=!0;let b={startX:x,startY:v,x:p<x?p:x,y:y<v?y:v,width:Math.abs(p-x),height:Math.abs(y-v)},w=k.current,S=P.current;k.current=new Set(K(l,b,i,n===c.Partial,!0).map(e=>e.id)),P.current=new Set;let E=h?.selectable??!0;for(let e of k.current){let t=d.get(e);if(t)for(let{edgeId:e}of t.values()){let t=s.get(e);t&&(t.selectable??E)&&P.current.add(e)}}eS(w,k.current)||u(t0(l,k.current,!0)),eS(S,P.current)||f(t0(s,P.current)),m.setState({userSelectionRect:b,userSelectionActive:!0,nodesSelectionActive:!1})}:h,onPointerUp:M?e=>{0===e.button&&(e.target?.releasePointerCapture?.(e.pointerId),!b&&e.target===C.current&&m.getState().userSelectionRect&&I?.(e),m.setState({userSelectionActive:!1,userSelectionRect:null}),j.current&&(l?.(e),m.setState({nodesSelectionActive:k.current.size>0})))}:void 0,onPointerDownCapture:M?n=>{let{domNode:o}=m.getState();if(N.current=o?.getBoundingClientRect(),!N.current)return;let r=n.target===C.current;if(!r&&n.target.closest(".nokey")||!e||!(i&&r||t)||0!==n.button||!n.isPrimary)return;n.target?.setPointerCapture?.(n.pointerId),j.current=!1;let{x:a,y:l}=eP(n.nativeEvent,N.current);m.setState({userSelectionRect:{width:0,height:0,startX:a,startY:l,x:a,y:l}}),r||(n.stopPropagation(),n.preventDefault())}:void 0,onClickCapture:M?e=>{j.current&&(e.stopPropagation(),j.current=!1)}:void 0,onPointerLeave:g,ref:C,style:no,children:[p,(0,y.jsx)(nl,{})]})}function nc({id:e,store:t,unselect:n=!1,nodeRef:o}){let r,{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:l,nodeLookup:s,onError:d}=t.getState(),u=s.get(e);u?(t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&l)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):i([e])):d?.("012",(r=e,`Node with id "${r}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`))}function nf({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:a}){let l=tM(),[s,d]=(0,x.useState)(!1),u=(0,x.useRef)();return(0,x.useEffect)(()=>{u.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},a=0,l=new Map,s=!1,d={x:0,y:0},u=null,c=!1,f=null,h=!1,g=!1,p=null;return{update:function({noDragClassName:m,handleSelector:y,domNode:x,isSelectable:v,nodeId:b,nodeClickDistance:S=0}){function E({x:e,y:n}){let{nodeLookup:r,nodeExtent:a,snapGrid:s,snapToGrid:d,nodeOrigin:u,onNodeDrag:c,onSelectionDrag:f,onError:h,updateNodePositions:m}=t();i={x:e,y:n};let y=!1,x=l.size>1,v=x&&a?eo(Y(l)):null,w=x&&d?function({dragItems:e,snapGrid:t,x:n,y:o}){let r=e.values().next().value;if(!r)return null;let i={x:n-r.distance.x,y:o-r.distance.y},a=ef(i,t);return{x:a.x-i.x,y:a.y-i.y}}({dragItems:l,snapGrid:s,x:e,y:n}):null;for(let[t,o]of l){if(!r.has(t))continue;let i={x:e-o.distance.x,y:n-o.distance.y};d&&(i=w?{x:Math.round(i.x+w.x),y:Math.round(i.y+w.y)}:ef(i,s));let l=null;if(x&&a&&!o.extent&&v){let{positionAbsolute:e}=o.internals,t=e.x-v.x+a[0][0],n=e.x+o.measured.width-v.x2+a[1][0];l=[[t,e.y-v.y+a[0][1]],[n,e.y+o.measured.height-v.y2+a[1][1]]]}let{position:c,positionAbsolute:f}=U({nodeId:t,nextPosition:i,nodeLookup:r,nodeExtent:l||a,nodeOrigin:u,onError:h});y=y||o.position.x!==c.x||o.position.y!==c.y,o.position=c,o.internals.positionAbsolute=f}if(g=g||y,y&&(m(l,!0),p&&(o||c||!b&&f))){let[e,t]=e2({nodeId:b,dragItems:l,nodeLookup:r});o?.(p,l,e,t),c?.(p,e,t),b||f?.(p,t)}}async function M(){if(!u)return;let{transform:e,panBy:n,autoPanSpeed:o,autoPanOnNodeDrag:r}=t();if(!r){s=!1,cancelAnimationFrame(a);return}let[l,c]=et(d,u,o);(0!==l||0!==c)&&(i.x=(i.x??0)-l/e[2],i.y=(i.y??0)-c/e[2],await n({x:l,y:c})&&E(i)),a=requestAnimationFrame(M)}function C(o){let{nodeLookup:r,multiSelectionActive:a,nodesDraggable:s,transform:d,snapGrid:f,snapToGrid:h,selectNodesOnDrag:g,onNodeDragStart:p,onSelectionDragStart:m,unselectNodesAndEdges:y}=t();c=!0,g&&v||a||!b||r.get(b)?.selected||y(),v&&g&&b&&e?.(b);let x=eE(o.sourceEvent,{transform:d,snapGrid:f,snapToGrid:h,containerBounds:u});if(i=x,(l=function(e,t,n,o){let r=new Map;for(let[i,a]of e)if((a.selected||a.id===o)&&(!a.parentId||!function e(t,n){if(!t.parentId)return!1;let o=n.get(t.parentId);return!!o&&(!!o.selected||e(o,n))}(a,e))&&(a.draggable||t&&void 0===a.draggable)){let t=e.get(i);t&&r.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return r}(r,s,x,b)).size>0&&(n||p||!b&&m)){let[e,t]=e2({nodeId:b,dragItems:l,nodeLookup:r});n?.(o.sourceEvent,l,e,t),p?.(o.sourceEvent,e,t),b||m?.(o.sourceEvent,t)}}f=(0,w.select)(x);let N=D().clickDistance(S).on("start",e=>{let{domNode:n,nodeDragThreshold:o,transform:r,snapGrid:a,snapToGrid:l}=t();u=n?.getBoundingClientRect()||null,h=!1,g=!1,p=e.sourceEvent,0===o&&C(e),i=eE(e.sourceEvent,{transform:r,snapGrid:a,snapToGrid:l,containerBounds:u}),d=eP(e.sourceEvent,u)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:o,snapGrid:r,snapToGrid:a,nodeDragThreshold:f,nodeLookup:g}=t(),m=eE(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:a,containerBounds:u});if(p=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!g.has(b))&&(h=!0),!h){if(!s&&n&&c&&(s=!0,M()),!c){let t=eP(e.sourceEvent,u),n=t.x-d.x,o=t.y-d.y;Math.sqrt(n*n+o*o)>f&&C(e)}(i.x!==m.xSnapped||i.y!==m.ySnapped)&&l&&c&&(d=eP(e.sourceEvent,u),E(m))}}).on("end",e=>{if(c&&!h&&(s=!1,c=!1,cancelAnimationFrame(a),l.size>0)){let{nodeLookup:n,updateNodePositions:o,onNodeDragStop:i,onSelectionDragStop:a}=t();if(g&&(o(l,!1),g=!1),r||i||!b&&a){let[t,o]=e2({nodeId:b,dragItems:l,nodeLookup:n,dragging:!1});r?.(e.sourceEvent,l,t,o),i?.(e.sourceEvent,t,o),b||a?.(e.sourceEvent,o)}}}).filter(e=>{let t=e.target;return!e.button&&(!m||!e1(t,`.${m}`,x))&&(!y||e1(t,y,x))});f.call(N)},destroy:function(){f?.on(".drag",null)}}}({getStoreItems:()=>l.getState(),onNodeMouseDown:t=>{nc({id:t,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),(0,x.useEffect)(()=>{if(t)u.current?.destroy();else if(e.current)return u.current?.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:a}),()=>{u.current?.destroy()}},[n,o,t,i,e,r]),s}function nh(){let e=tM();return(0,x.useCallback)(t=>{let{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:l,nodeLookup:s,nodeOrigin:d}=e.getState(),u=new Map,c=e=>e.selected&&(e.draggable||i&&void 0===e.draggable),f=o?r[0]:5,h=o?r[1]:5,g=t.direction.x*f*t.factor,p=t.direction.y*h*t.factor;for(let[,e]of s){if(!c(e))continue;let t={x:e.internals.positionAbsolute.x+g,y:e.internals.positionAbsolute.y+p};o&&(t=ef(t,r));let{position:i,positionAbsolute:l}=U({nodeId:e.id,nextPosition:t,nodeLookup:s,nodeExtent:n,nodeOrigin:d,onError:a});e.position=i,e.internals.positionAbsolute=l,u.set(e.id,e)}l(u)},[])}let ng=(0,x.createContext)(null),np=ng.Provider;ng.Consumer;let nm=()=>(0,x.useContext)(ng),ny=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),nx=(0,x.memo)(t5(function({type:e="source",position:t=g.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:a,onConnect:l,children:s,className:u,onMouseDown:c,onTouchStart:f,...h},p){let m=a||null,x="target"===e,b=tM(),w=nm(),{connectOnClick:S,noPanClassName:E,rfId:M}=tE(ny,tv),{connectingFrom:C,connectingTo:N,clickConnecting:k,isPossibleEndHandle:P,connectionInProcess:j,clickConnectionInProcess:I,valid:D}=tE(t=>{let{connectionClickStartHandle:n,connectionMode:o,connection:r}=t,{fromHandle:i,toHandle:a,isValid:l}=r,s=a?.nodeId===w&&a?.id===m&&a?.type===e;return{connectingFrom:i?.nodeId===w&&i?.id===m&&i?.type===e,connectingTo:s,clickConnecting:n?.nodeId===w&&n?.id===m&&n?.type===e,isPossibleEndHandle:o===d.Strict?i?.type!==e:w!==i?.nodeId||m!==i?.id,connectionInProcess:!!i,clickConnectionInProcess:!!n,valid:s&&l}},tv);w||b.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");let $=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=b.getState(),r={...t,...e};if(o){var i,a;let e,t,{edges:n,setEdges:o}=b.getState();o((i=r,a=n,i.source&&i.target?(t=e=F(i)?{...i}:{...i,id:(({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`)(i)},a.some(e=>e.source===t.source&&e.target===t.target&&(e.sourceHandle===t.sourceHandle||!e.sourceHandle&&!t.sourceHandle)&&(e.targetHandle===t.targetHandle||!e.targetHandle&&!t.targetHandle)))?a:(null===e.sourceHandle&&delete e.sourceHandle,null===e.targetHandle&&delete e.targetHandle,a.concat(e)):(ec("006","Can't create edge. An edge needs a source and a target."),a)))}n?.(r),l?.(r)},A=e=>{if(!w)return;let t="clientX"in e.nativeEvent;if(r&&(t&&0===e.button||!t)){let t=b.getState();e7(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:x,handleId:m,nodeId:w,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:$,isValidConnection:n||t.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?c?.(e):f?.(e)};return(0,y.jsx)("div",{"data-handleid":m,"data-nodeid":w,"data-handlepos":t,"data-id":`${M}-${w}-${m}-${e}`,className:v(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,u,{source:!x,target:x,connectable:o,connectablestart:r,connectableend:i,clickconnecting:k,connectingfrom:C,connectingto:N,valid:D,connectionindicator:o&&(!j||P)&&(j||I?i:r)}]),onMouseDown:A,onTouchStart:A,onClick:S?t=>{let{onClickConnectStart:o,onClickConnectEnd:i,connectionClickStartHandle:a,connectionMode:l,isValidConnection:s,lib:d,rfId:u,nodeLookup:c,connection:f}=b.getState();if(!w||!a&&!r)return;if(!a){o?.(t.nativeEvent,{nodeId:w,handleId:m,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:w,type:e,id:m}});return}let h=eC(t.target),g=n||s,{connection:p,isValid:y}=e6(t.nativeEvent,{handle:{nodeId:w,id:m,type:e},connectionMode:l,fromNodeId:a.nodeId,fromHandleId:a.id||null,fromType:a.type,isValidConnection:g,flowId:u,doc:h,lib:d,nodeLookup:c});y&&p&&$(p);let x=structuredClone(f);delete x.inProgress,x.toPosition=x.toHandle?x.toHandle.position:null,i?.(t,x),b.setState({connectionClickStartHandle:null})}:void 0,ref:p,...h,children:s})})),nv={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},nb={input:function({data:e,isConnectable:t,sourcePosition:n=g.Bottom}){return(0,y.jsxs)(y.Fragment,{children:[e?.label,(0,y.jsx)(nx,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=g.Top,sourcePosition:o=g.Bottom}){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(nx,{type:"target",position:n,isConnectable:t}),e?.label,(0,y.jsx)(nx,{type:"source",position:o,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=g.Top}){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(nx,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},nw=e=>{let{width:t,height:n,x:o,y:r}=Y(e.nodeLookup,{filter:e=>!!e.selected});return{width:eu(t)?t:null,height:eu(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function nS({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let o=tM(),{width:r,height:i,transformString:a,userSelectionActive:l}=tE(nw,tv),s=nh(),d=(0,x.useRef)(null);if((0,x.useEffect)(()=>{n||d.current?.focus({preventScroll:!0})},[n]),nf({nodeRef:d}),l||!r||!i)return null;let u=e?t=>{e(t,o.getState().nodes.filter(e=>e.selected))}:void 0;return(0,y.jsx)("div",{className:v(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:(0,y.jsx)("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(nv,e.key)&&(e.preventDefault(),s({direction:nv[e.key],factor:e.shiftKey?4:1}))},style:{width:r,height:i}})})}let nE="undefined"!=typeof window?window:void 0,nM=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function nC({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:a,paneClickDistance:l,deleteKeyCode:s,selectionKeyCode:d,selectionOnDrag:u,selectionMode:c,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:p,zoomActivationKeyCode:m,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:S,panOnScrollSpeed:E,panOnScrollMode:M,zoomOnDoubleClick:C,panOnDrag:N,defaultViewport:k,translateExtent:P,minZoom:j,maxZoom:I,preventScrolling:D,onSelectionContextMenu:$,noWheelClassName:A,noPanClassName:R,disableKeyboardA11y:_,onViewportChange:z,isControlledViewport:L}){let{nodesSelectionActive:O,userSelectionActive:B}=tE(nM),H=tU(d,{target:nE}),T=tU(p,{target:nE}),V=T||N,F=T||S,Z=u&&!0!==V,X=H||B||Z;return!function({deleteKeyCode:e,multiSelectionKeyCode:t}){let n=tM(),{deleteElements:o}=ne(),r=tU(e,{actInsideInputWithModifier:!1}),i=tU(t,{target:nn});(0,x.useEffect)(()=>{if(r){let{edges:e,nodes:t}=n.getState();o({nodes:t.filter(nt),edges:e.filter(nt)}),n.setState({nodesSelectionActive:!1})}},[r]),(0,x.useEffect)(()=>{n.setState({multiSelectionActive:i})},[i])}({deleteKeyCode:s,multiSelectionKeyCode:g}),(0,y.jsx)(ni,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:F,panOnScrollSpeed:E,panOnScrollMode:M,zoomOnDoubleClick:C,panOnDrag:!H&&V,defaultViewport:k,translateExtent:P,minZoom:j,maxZoom:I,zoomActivationKeyCode:m,preventScrolling:D,noWheelClassName:A,noPanClassName:R,onViewportChange:z,isControlledViewport:L,paneClickDistance:l,selectionOnDrag:Z,children:(0,y.jsxs)(nu,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:V,isSelecting:!!X,selectionMode:c,selectionKeyPressed:H,paneClickDistance:l,selectionOnDrag:Z,children:[e,O&&(0,y.jsx)(nS,{onSelectionContextMenu:$,noPanClassName:R,disableKeyboardA11y:_})]})})}nC.displayName="FlowRenderer";let nN=(0,x.memo)(nC),nk=e=>e.updateNodeInternals;var nP=(0,x.memo)(function({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:a,nodesDraggable:l,elementsSelectable:s,nodesConnectable:d,nodesFocusable:u,resizeObserver:c,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:g,rfId:p,nodeTypes:m,nodeClickDistance:b,onError:w}){let S,{node:E,internals:M,isParent:C}=tE(t=>{let n=t.nodeLookup.get(e),o=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:o}},tv),N=E.type||"default",k=m?.[N]||nb[N];void 0===k&&(w?.("003",(S=N,`Node type "${S}" not found. Using fallback type "default".`)),N="default",k=m?.default||nb.default);let P=!!(E.draggable||l&&void 0===E.draggable),j=!!(E.selectable||s&&void 0===E.selectable),I=!!(E.connectable||d&&void 0===E.connectable),D=!!(E.focusable||u&&void 0===E.focusable),$=tM(),A=eb(E),R=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){let r=tM(),i=(0,x.useRef)(null),a=(0,x.useRef)(null),l=(0,x.useRef)(e.sourcePosition),s=(0,x.useRef)(e.targetPosition),d=(0,x.useRef)(t),u=n&&!!e.internals.handleBounds;return(0,x.useEffect)(()=>{!i.current||e.hidden||u&&a.current===i.current||(a.current&&o?.unobserve(a.current),o?.observe(i.current),a.current=i.current)},[u,e.hidden]),(0,x.useEffect)(()=>()=>{a.current&&(o?.unobserve(a.current),a.current=null)},[]),(0,x.useEffect)(()=>{if(i.current){let n=d.current!==t,o=l.current!==e.sourcePosition,a=s.current!==e.targetPosition;(n||o||a)&&(d.current=t,l.current=e.sourcePosition,s.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}({node:E,nodeType:N,hasDimensions:A,resizeObserver:c}),_=nf({nodeRef:R,disabled:E.hidden||!P,noDragClassName:f,handleSelector:E.dragHandle,nodeId:e,isSelectable:j,nodeClickDistance:b}),z=nh();if(E.hidden)return null;let L=ev(E),B=void 0===E.internals.handleBounds?{width:E.width??E.initialWidth??E.style?.width,height:E.height??E.initialHeight??E.style?.height}:{width:E.width??E.style?.width,height:E.height??E.style?.height},H=j||P||t||n||o||r,T=n?e=>n(e,{...M.userNode}):void 0,V=o?e=>o(e,{...M.userNode}):void 0,F=r?e=>r(e,{...M.userNode}):void 0,Z=i?e=>i(e,{...M.userNode}):void 0,X=a?e=>a(e,{...M.userNode}):void 0;return(0,y.jsx)("div",{className:v(["react-flow__node",`react-flow__node-${N}`,{[h]:P},E.className,{selected:E.selected,selectable:j,parent:C,draggable:P,dragging:_}]),ref:R,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:A?"visible":"hidden",...E.style,...B},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:T,onMouseMove:V,onMouseLeave:F,onContextMenu:Z,onClick:n=>{let{selectNodesOnDrag:o,nodeDragThreshold:r}=$.getState();j&&(!o||!P||r>0)&&nc({id:e,store:$,nodeRef:R}),t&&t(n,{...M.userNode})},onDoubleClick:X,onKeyDown:D?t=>{if(!ek(t.nativeEvent)&&!g){if(O.includes(t.key)&&j)nc({id:e,store:$,unselect:"Escape"===t.key,nodeRef:R});else if(P&&E.selected&&Object.prototype.hasOwnProperty.call(nv,t.key)){t.preventDefault();let{ariaLabelConfig:e}=$.getState();$.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),z({direction:nv[t.key],factor:t.shiftKey?4:1})}}}:void 0,tabIndex:D?0:void 0,onFocus:D?()=>{if(g||!R.current?.matches(":focus-visible"))return;let{transform:t,width:n,height:o,autoPanOnNodeFocus:r,setCenter:i}=$.getState();!r||K(new Map([[e,E]]),{x:0,y:0,width:n,height:o},t,!0).length>0||i(E.position.x+L.width/2,E.position.y+L.height/2,{zoom:t[2]})}:void 0,role:E.ariaRole??(D?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${tk}-${p}`,"aria-label":E.ariaLabel,...E.domAttributes,children:(0,y.jsx)(np,{value:e,children:(0,y.jsx)(k,{id:e,data:E.data,type:N,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:E.selected??!1,selectable:j,draggable:P,deletable:E.deletable??!0,isConnectable:I,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:_,dragHandle:E.dragHandle,zIndex:M.z,parentId:E.parentId,...L})})})});let nj=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function nI(e){var t;let{nodesDraggable:n,nodesConnectable:o,nodesFocusable:r,elementsSelectable:i,onError:a}=tE(nj,tv),l=(t=e.onlyRenderVisibleElements,tE((0,x.useCallback)(e=>t?K(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(e=>e.id):Array.from(e.nodeLookup.keys()),[t]),tv)),s=function(){let e=tE(nk),[t]=(0,x.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,x.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,y.jsx)("div",{className:"react-flow__nodes",style:no,children:l.map(t=>(0,y.jsx)(nP,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:n,nodesConnectable:o,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},t))})}nI.displayName="NodeRenderer";let nD=(0,x.memo)(nI),n$={[h.Arrow]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e}};return(0,y.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[h.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,y.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},nA=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{let s,d=(s=tM(),(0,x.useMemo)(()=>{let e;return Object.prototype.hasOwnProperty.call(n$,t)?n$[t]:(s.getState().onError?.("009",(e=t,`Marker type "${e}" doesn't exist.`)),null)},[t]));return d?(0,y.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0",children:(0,y.jsx)(d,{color:n,strokeWidth:a})}):null},nR=({defaultColor:e,rfId:t})=>{let n=tE(e=>e.edges),o=tE(e=>e.defaultEdgeOptions),r=(0,x.useMemo)(()=>(function(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){let i=new Set;return e.reduce((e,a)=>([a.markerStart||o,a.markerEnd||r].forEach(o=>{if(o&&"object"==typeof o){let r=eZ(o,t);i.has(r)||(e.push({id:r,color:o.color||n,...o}),i.add(r))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))})(n,{id:t,defaultColor:e,defaultMarkerStart:o?.markerStart,defaultMarkerEnd:o?.markerEnd}),[n,o,t,e]);return r.length?(0,y.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,y.jsx)("defs",{children:r.map(e=>(0,y.jsx)(nA,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};nR.displayName="MarkerDefinitions";var n_=(0,x.memo)(nR);function nz({x:e,y:t,label:n,labelStyle:o,labelShowBg:r=!0,labelBgStyle:i,labelBgPadding:a=[2,4],labelBgBorderRadius:l=2,children:s,className:d,...u}){let[c,f]=(0,x.useState)({x:1,y:0,width:0,height:0}),h=v(["react-flow__edge-textwrapper",d]),g=(0,x.useRef)(null);return((0,x.useEffect)(()=>{if(g.current){let e=g.current.getBBox();f({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n)?(0,y.jsxs)("g",{transform:`translate(${e-c.width/2} ${t-c.height/2})`,className:h,visibility:c.width?"visible":"hidden",...u,children:[r&&(0,y.jsx)("rect",{width:c.width+2*a[0],x:-a[0],y:-a[1],height:c.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),(0,y.jsx)("text",{className:"react-flow__edge-text",y:c.height/2,dy:"0.3em",ref:g,style:o,children:n}),s]}):null}nz.displayName="EdgeText";let nL=(0,x.memo)(nz);function nO({path:e,labelX:t,labelY:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s,interactionWidth:d=20,...u}){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("path",{...u,d:e,fill:"none",className:v(["react-flow__edge-path",u.className])}),d?(0,y.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,o&&eu(t)&&eu(n)?(0,y.jsx)(nL,{x:t,y:n,label:o,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:s}):null]})}function nB({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===g.Left||e===g.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function nH({sourceX:e,sourceY:t,sourcePosition:n=g.Bottom,targetX:o,targetY:r,targetPosition:i=g.Top}){let[a,l]=nB({pos:n,x1:e,y1:t,x2:o,y2:r}),[s,d]=nB({pos:i,x1:o,y1:r,x2:e,y2:t}),[u,c,f,h]=eI({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:s,targetControlY:d});return[`M${e},${t} C${a},${l} ${s},${d} ${o},${r}`,u,c,f,h]}function nT(e){return(0,x.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:a,targetPosition:l,label:s,labelStyle:d,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:p,markerStart:m,interactionWidth:x})=>{let[v,b,w]=nH({sourceX:n,sourceY:o,sourcePosition:a,targetX:r,targetY:i,targetPosition:l}),S=e.isInternal?void 0:t;return(0,y.jsx)(nO,{id:S,path:v,labelX:b,labelY:w,label:s,labelStyle:d,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:p,markerStart:m,interactionWidth:x})})}let nV=nT({isInternal:!1}),nF=nT({isInternal:!0});function nZ(e){return(0,x.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:a,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:f,sourcePosition:h=g.Bottom,targetPosition:p=g.Top,markerEnd:m,markerStart:x,pathOptions:v,interactionWidth:b})=>{let[w,S,E]=eB({sourceX:n,sourceY:o,sourcePosition:h,targetX:r,targetY:i,targetPosition:p,borderRadius:v?.borderRadius,offset:v?.offset,stepPosition:v?.stepPosition}),M=e.isInternal?void 0:t;return(0,y.jsx)(nO,{id:M,path:w,labelX:S,labelY:E,label:a,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:m,markerStart:x,interactionWidth:b})})}nV.displayName="SimpleBezierEdge",nF.displayName="SimpleBezierEdgeInternal";let nX=nZ({isInternal:!1}),nY=nZ({isInternal:!0});function nK(e){return(0,x.memo)(({id:t,...n})=>{let o=e.isInternal?void 0:t;return(0,y.jsx)(nX,{...n,id:o,pathOptions:(0,x.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}nX.displayName="SmoothStepEdge",nY.displayName="SmoothStepEdgeInternal";let nW=nK({isInternal:!1}),nU=nK({isInternal:!0});function nq(e){return(0,x.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:a,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:h,markerStart:g,interactionWidth:p})=>{let[m,x,v]=e_({sourceX:n,sourceY:o,targetX:r,targetY:i}),b=e.isInternal?void 0:t;return(0,y.jsx)(nO,{id:b,path:m,labelX:x,labelY:v,label:a,labelStyle:l,labelShowBg:s,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:c,style:f,markerEnd:h,markerStart:g,interactionWidth:p})})}nW.displayName="StepEdge",nU.displayName="StepEdgeInternal";let nQ=nq({isInternal:!1}),nG=nq({isInternal:!0});function nJ(e){return(0,x.memo)(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:a=g.Bottom,targetPosition:l=g.Top,label:s,labelStyle:d,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:x,pathOptions:v,interactionWidth:b})=>{let[w,S,E]=eA({sourceX:n,sourceY:o,sourcePosition:a,targetX:r,targetY:i,targetPosition:l,curvature:v?.curvature}),M=e.isInternal?void 0:t;return(0,y.jsx)(nO,{id:M,path:w,labelX:S,labelY:E,label:s,labelStyle:d,labelShowBg:u,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:m,markerStart:x,interactionWidth:b})})}nQ.displayName="StraightEdge",nG.displayName="StraightEdgeInternal";let n0=nJ({isInternal:!1}),n1=nJ({isInternal:!0});n0.displayName="BezierEdge",n1.displayName="BezierEdgeInternal";let n2={default:n1,straight:nG,step:nU,smoothstep:nY,simplebezier:nF},n3={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},n5="react-flow__edgeupdater";function n4({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:a,type:l}){return(0,y.jsx)("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:a,className:v([n5,`${n5}-${l}`]),cx:e===g.Left?t-o:e===g.Right?t+o:t,cy:e===g.Top?n-o:e===g.Bottom?n+o:n,r:o,stroke:"transparent",fill:"transparent"})}function n6({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:l,targetPosition:s,onReconnect:d,onReconnectStart:u,onReconnectEnd:c,setReconnecting:f,setUpdateHover:h}){let g=tM(),p=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:o,domNode:r,isValidConnection:i,connectionMode:a,connectionRadius:l,lib:s,onConnectStart:h,onConnectEnd:p,cancelConnection:m,nodeLookup:y,rfId:x,panBy:v,updateConnection:b}=g.getState(),w="target"===t.type;e7(e.nativeEvent,{autoPanOnConnect:o,connectionMode:a,connectionRadius:l,domNode:r,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:w,edgeUpdaterType:t.type,lib:s,flowId:x,cancelConnection:m,panBy:v,isValidConnection:i,onConnect:e=>d?.(n,e),onConnectStart:(o,r)=>{f(!0),u?.(e,n,t.type),h?.(o,r)},onConnectEnd:p,onReconnectEnd:(e,o)=>{f(!1),c?.(e,n,t.type,o)},updateConnection:b,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,dragThreshold:g.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},m=()=>h(!0),x=()=>h(!1);return(0,y.jsxs)(y.Fragment,{children:[(!0===e||"source"===e)&&(0,y.jsx)(n4,{position:l,centerX:o,centerY:r,radius:t,onMouseDown:e=>p(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:m,onMouseOut:x,type:"source"}),(!0===e||"target"===e)&&(0,y.jsx)(n4,{position:s,centerX:i,centerY:a,radius:t,onMouseDown:e=>p(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:m,onMouseOut:x,type:"target"})]})}var n7=(0,x.memo)(function({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:a,onMouseEnter:l,onMouseMove:s,onMouseLeave:u,reconnectRadius:c,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:m,edgeTypes:b,noPanClassName:w,onError:S,disableKeyboardA11y:E}){let M,C=tE(t=>t.edgeLookup.get(e)),N=tE(e=>e.defaultEdgeOptions),k=(C=N?{...N,...C}:C).type||"default",P=b?.[k]||n2[k];void 0===P&&(S?.("011",(M=k,`Edge type "${M}" not found. Using fallback type "default".`)),k="default",P=b?.default||n2.default);let j=!!(C.focusable||t&&void 0===C.focusable),I=void 0!==f&&(C.reconnectable||n&&void 0===C.reconnectable),D=!!(C.selectable||o&&void 0===C.selectable),$=(0,x.useRef)(null),[A,R]=(0,x.useState)(!1),[_,z]=(0,x.useState)(!1),L=tM(),{zIndex:B,sourceX:H,sourceY:T,targetX:V,targetY:F,sourcePosition:Z,targetPosition:X}=tE((0,x.useCallback)(t=>{let n=t.nodeLookup.get(C.source),o=t.nodeLookup.get(C.target);if(!n||!o)return{zIndex:C.zIndex,...n3};let r=function(e){let{sourceNode:t,targetNode:n}=e;if(!eH(t)||!eH(n))return null;let o=t.internals.handleBounds||eT(t.handles),r=n.internals.handleBounds||eT(n.handles),i=eF(o?.source??[],e.sourceHandle),a=eF(e.connectionMode===d.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),e.targetHandle);if(!i||!a)return e.onError?.("008",((e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:o}", edge id: ${t}.`)(!i?"source":"target",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let l=i?.position||g.Bottom,s=a?.position||g.Top,u=eV(t,i,l),c=eV(n,a,s);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:l,targetPosition:s}}({id:e,sourceNode:n,targetNode:o,sourceHandle:C.sourceHandle||null,targetHandle:C.targetHandle||null,connectionMode:t.connectionMode,onError:S});return{zIndex:function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o,elevateOnSelect:r=!1}){if(void 0!==o)return o;let i=Math.max(e.parentId||r&&e.selected?e.internals.z:0,t.parentId||r&&t.selected?t.internals.z:0);return(r&&n?1e3:0)+i}({selected:C.selected,zIndex:C.zIndex,sourceNode:n,targetNode:o,elevateOnSelect:t.elevateEdgesOnSelect}),...r||n3}},[C.source,C.target,C.sourceHandle,C.targetHandle,C.selected,C.zIndex]),tv),Y=(0,x.useMemo)(()=>C.markerStart?`url('#${eZ(C.markerStart,m)}')`:void 0,[C.markerStart,m]),K=(0,x.useMemo)(()=>C.markerEnd?`url('#${eZ(C.markerEnd,m)}')`:void 0,[C.markerEnd,m]);if(C.hidden||null===H||null===T||null===V||null===F)return null;let W=i?e=>{i(e,{...C})}:void 0,U=a?e=>{a(e,{...C})}:void 0,q=l?e=>{l(e,{...C})}:void 0,Q=s?e=>{s(e,{...C})}:void 0,G=u?e=>{u(e,{...C})}:void 0;return(0,y.jsx)("svg",{style:{zIndex:B},children:(0,y.jsxs)("g",{className:v(["react-flow__edge",`react-flow__edge-${k}`,C.className,w,{selected:C.selected,animated:C.animated,inactive:!D&&!r,updating:A,selectable:D}]),onClick:t=>{let{addSelectedEdges:n,unselectNodesAndEdges:o,multiSelectionActive:i}=L.getState();D&&(L.setState({nodesSelectionActive:!1}),C.selected&&i?(o({nodes:[],edges:[C]}),$.current?.blur()):n([e])),r&&r(t,C)},onDoubleClick:W,onContextMenu:U,onMouseEnter:q,onMouseMove:Q,onMouseLeave:G,onKeyDown:j?t=>{if(!E&&O.includes(t.key)&&D){let{unselectNodesAndEdges:n,addSelectedEdges:o}=L.getState();"Escape"===t.key?($.current?.blur(),n({edges:[C]})):o([e])}}:void 0,tabIndex:j?0:void 0,role:C.ariaRole??(j?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===C.ariaLabel?void 0:C.ariaLabel||`Edge from ${C.source} to ${C.target}`,"aria-describedby":j?`${tP}-${m}`:void 0,ref:$,...C.domAttributes,children:[!_&&(0,y.jsx)(P,{id:e,source:C.source,target:C.target,type:C.type,selected:C.selected,animated:C.animated,selectable:D,deletable:C.deletable??!0,label:C.label,labelStyle:C.labelStyle,labelShowBg:C.labelShowBg,labelBgStyle:C.labelBgStyle,labelBgPadding:C.labelBgPadding,labelBgBorderRadius:C.labelBgBorderRadius,sourceX:H,sourceY:T,targetX:V,targetY:F,sourcePosition:Z,targetPosition:X,data:C.data,style:C.style,sourceHandleId:C.sourceHandle,targetHandleId:C.targetHandle,markerStart:Y,markerEnd:K,pathOptions:"pathOptions"in C?C.pathOptions:void 0,interactionWidth:C.interactionWidth}),I&&(0,y.jsx)(n6,{edge:C,isReconnectable:I,reconnectRadius:c,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:H,sourceY:T,targetX:V,targetY:F,sourcePosition:Z,targetPosition:X,setUpdateHover:R,setReconnecting:z})]})})});let n8=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function n9({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:s,onEdgeMouseLeave:d,onEdgeClick:u,reconnectRadius:c,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:p}){let{edgesFocusable:m,edgesReconnectable:v,elementsSelectable:b,onError:w}=tE(n8,tv),S=tE((0,x.useCallback)(e=>{if(!t)return e.edges.map(e=>e.id);let n=[];if(e.width&&e.height)for(let t of e.edges){let o=e.nodeLookup.get(t.source),r=e.nodeLookup.get(t.target);o&&r&&function({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){let i=en(ea(e),ea(t));return i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1),es({x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]},er(i))>0}({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n},[t]),tv);return(0,y.jsxs)("div",{className:"react-flow__edges",children:[(0,y.jsx)(n_,{defaultColor:e,rfId:n}),S.map(e=>(0,y.jsx)(n7,{id:e,edgesFocusable:m,edgesReconnectable:v,elementsSelectable:b,noPanClassName:r,onReconnect:i,onContextMenu:a,onMouseEnter:l,onMouseMove:s,onMouseLeave:d,onClick:u,reconnectRadius:c,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:w,edgeTypes:o,disableKeyboardA11y:p},e))]})}n9.displayName="EdgeRenderer";let oe=(0,x.memo)(n9),ot=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function on({children:e}){let t=tE(ot);return(0,y.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}let oo=e=>e.panZoom?.syncViewport;function or(e){return e.connection.inProgress?{...e.connection,to:eh(e.connection.to,e.transform)}:{...e.connection}}let oi=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function oa({containerStyle:e,style:t,type:n,component:o}){let{nodesConnectable:r,width:i,height:a,isValid:l,inProgress:s}=tE(oi,tv);return i&&r&&s?(0,y.jsx)("svg",{style:e,width:i,height:a,className:"react-flow__connectionline react-flow__container",children:(0,y.jsx)("g",{className:v(["react-flow__connection",V(l)]),children:(0,y.jsx)(ol,{style:t,type:n,CustomComponent:o,isValid:l})})}):null}let ol=({style:e,type:t=f.Bezier,CustomComponent:n,isValid:o})=>{let{inProgress:r,from:i,fromNode:a,fromHandle:l,fromPosition:s,to:d,toNode:u,toHandle:c,toPosition:h}=tE(or,tv);if(!r)return;if(n)return(0,y.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:l,fromX:i.x,fromY:i.y,toX:d.x,toY:d.y,fromPosition:s,toPosition:h,connectionStatus:V(o),toNode:u,toHandle:c});let g="",p={sourceX:i.x,sourceY:i.y,sourcePosition:s,targetX:d.x,targetY:d.y,targetPosition:h};switch(t){case f.Bezier:[g]=eA(p);break;case f.SimpleBezier:[g]=nH(p);break;case f.Step:[g]=eB({...p,borderRadius:0});break;case f.SmoothStep:[g]=eB(p);break;default:[g]=e_(p)}return(0,y.jsx)("path",{d:g,fill:"none",className:"react-flow__connection-path",style:e})};ol.displayName="ConnectionLine";let os={};function od(e=os){(0,x.useRef)(e),tM(),(0,x.useEffect)(()=>{},[e])}function ou({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:s,onNodeMouseLeave:d,onNodeContextMenu:u,onSelectionContextMenu:c,onSelectionStart:f,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:p,connectionLineComponent:m,connectionLineContainerStyle:v,selectionKeyCode:b,selectionOnDrag:w,selectionMode:S,multiSelectionKeyCode:E,panActivationKeyCode:M,zoomActivationKeyCode:C,deleteKeyCode:N,onlyRenderVisibleElements:k,elementsSelectable:P,defaultViewport:j,translateExtent:I,minZoom:D,maxZoom:$,preventScrolling:A,defaultMarkerColor:R,zoomOnScroll:_,zoomOnPinch:z,panOnScroll:L,panOnScrollSpeed:O,panOnScrollMode:B,zoomOnDoubleClick:H,panOnDrag:T,onPaneClick:V,onPaneMouseEnter:F,onPaneMouseMove:Z,onPaneMouseLeave:X,onPaneScroll:Y,onPaneContextMenu:K,paneClickDistance:W,nodeClickDistance:U,onEdgeContextMenu:q,onEdgeMouseEnter:Q,onEdgeMouseMove:G,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:et,onReconnectStart:en,onReconnectEnd:eo,noDragClassName:er,noWheelClassName:ei,noPanClassName:ea,disableKeyboardA11y:el,nodeExtent:es,rfId:ed,viewport:eu,onViewportChange:ec}){let ef,eh,eg,ep;return od(e),od(t),tM(),(0,x.useRef)(!1),(0,x.useEffect)(()=>{},[]),ef=ne(),eh=(0,x.useRef)(!1),(0,x.useEffect)(()=>{!eh.current&&ef.viewportInitialized&&n&&(setTimeout(()=>n(ef),1),eh.current=!0)},[n,ef.viewportInitialized]),eg=tE(oo),ep=tM(),(0,x.useEffect)(()=>{eu&&(eg?.(eu),ep.setState({transform:[eu.x,eu.y,eu.zoom]}))},[eu,eg]),(0,y.jsx)(nN,{onPaneClick:V,onPaneMouseEnter:F,onPaneMouseMove:Z,onPaneMouseLeave:X,onPaneContextMenu:K,onPaneScroll:Y,paneClickDistance:W,deleteKeyCode:N,selectionKeyCode:b,selectionOnDrag:w,selectionMode:S,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:E,panActivationKeyCode:M,zoomActivationKeyCode:C,elementsSelectable:P,zoomOnScroll:_,zoomOnPinch:z,zoomOnDoubleClick:H,panOnScroll:L,panOnScrollSpeed:O,panOnScrollMode:B,panOnDrag:T,defaultViewport:j,translateExtent:I,minZoom:D,maxZoom:$,onSelectionContextMenu:c,preventScrolling:A,noDragClassName:er,noWheelClassName:ei,noPanClassName:ea,disableKeyboardA11y:el,onViewportChange:ec,isControlledViewport:!!eu,children:(0,y.jsxs)(on,{children:[(0,y.jsx)(oe,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:a,onReconnect:et,onReconnectStart:en,onReconnectEnd:eo,onlyRenderVisibleElements:k,onEdgeContextMenu:q,onEdgeMouseEnter:Q,onEdgeMouseMove:G,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:R,noPanClassName:ea,disableKeyboardA11y:el,rfId:ed}),(0,y.jsx)(oa,{style:p,type:g,component:m,containerStyle:v}),(0,y.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,y.jsx)(nD,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:l,onNodeMouseMove:s,onNodeMouseLeave:d,onNodeContextMenu:u,nodeClickDistance:U,onlyRenderVisibleElements:k,noPanClassName:ea,noDragClassName:er,disableKeyboardA11y:el,nodeExtent:es,rfId:ed}),(0,y.jsx)("div",{className:"react-flow__viewport-portal"})]})})}ou.displayName="GraphView";let oc=(0,x.memo)(ou),of=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,fitViewOptions:l,minZoom:s=.5,maxZoom:u=2,nodeOrigin:c,nodeExtent:f}={})=>{let h=new Map,g=new Map,p=new Map,m=new Map,y=o??t??[],x=n??e??[],v=c??[0,0],b=f??L;e0(p,m,y);let w=eW(x,h,g,{nodeOrigin:v,nodeExtent:b,elevateNodesOnSelect:!1}),S=[0,0,1];if(a&&r&&i){let{x:e,y:t,zoom:n}=em(Y(h,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),r,i,s,u,l?.padding??.1);S=[e,t,n]}return{rfId:"1",width:r??0,height:i??0,transform:S,nodes:x,nodesInitialized:w,nodeLookup:h,parentLookup:g,edges:y,edgeLookup:m,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:s,maxZoom:u,translateExtent:L,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:d.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:v,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:l,fitViewResolver:null,connection:{...H},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:ec,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:B}};function oh({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,initialMinZoom:a,initialMaxZoom:l,initialFitViewOptions:s,fitView:d,nodeOrigin:u,nodeExtent:c,children:f}){let[h]=(0,x.useState)(()=>(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,fitViewOptions:l,minZoom:s,maxZoom:d,nodeOrigin:u,nodeExtent:c})=>{let f,h;return f=(f,h)=>{async function g(){let{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:o,width:r,height:i,minZoom:a,maxZoom:l}=h();t&&(await W({nodes:e,width:r,height:i,panZoom:t,minZoom:a,maxZoom:l},n),o?.resolve(!0),f({fitViewResolver:null}))}return{...of({nodes:e,edges:t,width:r,height:i,fitView:a,fitViewOptions:l,minZoom:s,maxZoom:d,nodeOrigin:u,nodeExtent:c,defaultNodes:n,defaultEdges:o}),setNodes:e=>{let{nodeLookup:t,parentLookup:n,nodeOrigin:o,elevateNodesOnSelect:r,fitViewQueued:i}=h(),a=eW(e,t,n,{nodeOrigin:o,nodeExtent:c,elevateNodesOnSelect:r,checkEquality:!0});i&&a?(g(),f({nodes:e,nodesInitialized:a,fitViewQueued:!1,fitViewOptions:void 0})):f({nodes:e,nodesInitialized:a})},setEdges:e=>{let{connectionLookup:t,edgeLookup:n}=h();e0(t,n,e),f({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){let{setNodes:t}=h();t(e),f({hasDefaultNodes:!0})}if(t){let{setEdges:e}=h();e(t),f({hasDefaultEdges:!0})}},updateNodeInternals:e=>{let{triggerNodeChanges:t,nodeLookup:n,parentLookup:o,domNode:r,nodeOrigin:i,nodeExtent:a,debug:l,fitViewQueued:s}=h(),{changes:d,updatedInternals:u}=function(e,t,n,o,r,i){let a=o?.querySelector(".xyflow__viewport"),l=!1;if(!a)return{changes:[],updatedInternals:l};let s=[],d=window.getComputedStyle(a),{m22:u}=new window.DOMMatrixReadOnly(d.transform),c=[];for(let o of e.values()){let e=t.get(o.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}let a=eM(o.nodeElement),d=e.measured.width!==a.width||e.measured.height!==a.height;if(a.width&&a.height&&(d||!e.internals.handleBounds||o.force)){let f=o.nodeElement.getBoundingClientRect(),h=ex(e.extent)?e.extent:i,{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=J(g,a,t.get(e.parentId)):h&&(g=G(g,h,a));let p={...e,measured:a,internals:{...e.internals,positionAbsolute:g,handleBounds:{source:ej("source",o.nodeElement,f,u,e.id),target:ej("target",o.nodeElement,f,u,e.id)}}};t.set(e.id,p),e.parentId&&eU(p,t,n,{nodeOrigin:r}),l=!0,d&&(s.push({id:e.id,type:"dimensions",dimensions:a}),e.expandParent&&e.parentId&&c.push({id:e.id,parentId:e.parentId,rect:ei(p,r)}))}}if(c.length>0){let e=eQ(c,t,n,r);s.push(...e)}return{changes:s,updatedInternals:l}}(e,n,o,r,i,a);u&&(!function(e,t,n){let o=eK(eX,n);for(let n of e.values())if(n.parentId)eU(n,e,t,o);else{let e=G(X(n,o.nodeOrigin),ex(n.extent)?n.extent:o.nodeExtent,ev(n));n.internals.positionAbsolute=e}}(n,o,{nodeOrigin:i,nodeExtent:a}),s?(g(),f({fitViewQueued:!1,fitViewOptions:void 0})):f({}),d?.length>0&&(l&&console.log("React Flow: trigger node changes",d),t?.(d)))},updateNodePositions:(e,t=!1)=>{let n=[],o=[],{nodeLookup:r,triggerNodeChanges:i}=h();for(let[i,a]of e){let e=r.get(i),l=!!(e?.expandParent&&e?.parentId&&a?.position),s={id:i,type:"position",position:l?{x:Math.max(0,a.position.x),y:Math.max(0,a.position.y)}:a.position,dragging:t};l&&e.parentId&&n.push({id:i,parentId:e.parentId,rect:{...a.internals.positionAbsolute,width:a.measured.width??0,height:a.measured.height??0}}),o.push(s)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=h(),i=eQ(n,r,e,t);o.push(...i)}i(o)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:i}=h();e?.length&&(r&&n(tG(e,o)),i&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:i}=h();e?.length&&(r&&n(tG(e,o)),i&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=h();t?r(e.map(e=>tJ(e,!0))):(r(t0(o,new Set([...e]),!0)),i(t0(n)))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=h();t?i(e.map(e=>tJ(e,!0))):(i(t0(n,new Set([...e]))),r(t0(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{let{edges:n,nodes:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:a}=h(),l=(e||o).map(e=>{let t=r.get(e.id);return t&&(t.selected=!1),tJ(e.id,!1)}),s=(t||n).map(e=>tJ(e.id,!1));i(l),a(s)},setMinZoom:e=>{let{panZoom:t,maxZoom:n}=h();t?.setScaleExtent([e,n]),f({minZoom:e})},setMaxZoom:e=>{let{panZoom:t,minZoom:n}=h();t?.setScaleExtent([n,e]),f({maxZoom:e})},setTranslateExtent:e=>{h().panZoom?.setTranslateExtent(e),f({translateExtent:e})},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o,elementsSelectable:r}=h();if(!r)return;let i=t.reduce((e,t)=>t.selected?[...e,tJ(t.id,!1)]:e,[]),a=e.reduce((e,t)=>t.selected?[...e,tJ(t.id,!1)]:e,[]);n(i),o(a)},setNodeExtent:e=>{let{nodes:t,nodeLookup:n,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:i,nodeExtent:a}=h();(e[0][0]!==a[0][0]||e[0][1]!==a[0][1]||e[1][0]!==a[1][0]||e[1][1]!==a[1][1])&&(eW(t,n,o,{nodeOrigin:r,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1}),f({nodeExtent:e}))},panBy:e=>{let{transform:t,width:n,height:o,panZoom:r,translateExtent:i}=h();return eG({delta:e,panZoom:r,transform:t,translateExtent:i,width:n,height:o})},setCenter:async(e,t,n)=>{let{width:o,height:r,maxZoom:i,panZoom:a}=h();if(!a)return Promise.resolve(!1);let l=void 0!==n?.zoom?n.zoom:i;return await a.setViewport({x:o/2-e*l,y:r/2-t*l,zoom:l},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{f({connection:{...H}})},updateConnection:e=>{f({connection:e})},reset:()=>f({...of()})}},h=Object.is,f?tx(f,h):tx})({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:d,minZoom:a,maxZoom:l,fitViewOptions:s,nodeOrigin:u,nodeExtent:c}));return(0,y.jsx)(tw,{value:h,children:(0,y.jsx)(t8,{children:f})})}function og({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:a,fitView:l,fitViewOptions:s,minZoom:d,maxZoom:u,nodeOrigin:c,nodeExtent:f}){return(0,x.useContext)(tb)?(0,y.jsx)(y.Fragment,{children:e}):(0,y.jsx)(oh,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:a,fitView:l,initialFitViewOptions:s,initialMinZoom:d,initialMaxZoom:u,nodeOrigin:c,nodeExtent:f,children:e})}let op={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var om=t5(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:a,onNodeClick:l,onEdgeClick:s,onInit:d,onMove:h,onMoveStart:g,onMoveEnd:p,onConnect:m,onConnectStart:b,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:E,onNodeMouseEnter:M,onNodeMouseMove:C,onNodeMouseLeave:N,onNodeContextMenu:k,onNodeDoubleClick:P,onNodeDragStart:j,onNodeDrag:I,onNodeDragStop:D,onNodesDelete:$,onEdgesDelete:A,onDelete:R,onSelectionChange:_,onSelectionDragStart:z,onSelectionDrag:O,onSelectionDragStop:B,onSelectionContextMenu:H,onSelectionStart:T,onSelectionEnd:V,onBeforeDelete:F,connectionMode:Z,connectionLineType:X=f.Bezier,connectionLineStyle:Y,connectionLineComponent:K,connectionLineContainerStyle:W,deleteKeyCode:U="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:Q=!1,selectionMode:G=c.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:ee=ey()?"Meta":"Control",zoomActivationKeyCode:et=ey()?"Meta":"Control",snapToGrid:en,snapGrid:eo,onlyRenderVisibleElements:er=!1,selectNodesOnDrag:ei,nodesDraggable:ea,autoPanOnNodeFocus:el,nodesConnectable:es,nodesFocusable:ed,nodeOrigin:eu=tT,edgesFocusable:ec,edgesReconnectable:ef,elementsSelectable:eh=!0,defaultViewport:eg=tV,minZoom:ep=.5,maxZoom:em=2,translateExtent:ex=L,preventScrolling:ev=!0,nodeExtent:eb,defaultMarkerColor:ew="#b1b1b7",zoomOnScroll:eS=!0,zoomOnPinch:eE=!0,panOnScroll:eM=!1,panOnScrollSpeed:eC=.5,panOnScrollMode:eN=u.Free,zoomOnDoubleClick:ek=!0,panOnDrag:eP=!0,onPaneClick:ej,onPaneMouseEnter:eI,onPaneMouseMove:eD,onPaneMouseLeave:e$,onPaneScroll:eA,onPaneContextMenu:eR,paneClickDistance:e_=0,nodeClickDistance:ez=0,children:eL,onReconnect:eO,onReconnectStart:eB,onReconnectEnd:eH,onEdgeContextMenu:eT,onEdgeDoubleClick:eV,onEdgeMouseEnter:eF,onEdgeMouseMove:eZ,onEdgeMouseLeave:eX,reconnectRadius:eY=10,onNodesChange:eK,onEdgesChange:eW,noDragClassName:eU="nodrag",noWheelClassName:eq="nowheel",noPanClassName:eQ="nopan",fitView:eG,fitViewOptions:eJ,connectOnClick:e0,attributionPosition:e1,proOptions:e2,defaultEdgeOptions:e3,elevateNodesOnSelect:e5,elevateEdgesOnSelect:e4,disableKeyboardA11y:e6=!1,autoPanOnConnect:e7,autoPanOnNodeDrag:e8,autoPanSpeed:e9,connectionRadius:te,isValidConnection:tt,onError:tn,style:to,id:tr,nodeDragThreshold:ti,connectionDragThreshold:ta,viewport:tl,onViewportChange:ts,width:td,height:tu,colorMode:tc="light",debug:tf,onScroll:th,ariaLabelConfig:tg,...tp},tm){let ty=tr||"1",tx=function(e){let[t,n]=(0,x.useState)("system"===e?null:e);return(0,x.useEffect)(()=>{if("system"!==e)return void n(e);let t=tK(),o=()=>n(t?.matches?"dark":"light");return o(),t?.addEventListener("change",o),()=>{t?.removeEventListener("change",o)}},[e]),null!==t?t:tK()?.matches?"dark":"light"}(tc),tv=(0,x.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),th?.(e)},[th]);return(0,y.jsx)("div",{"data-testid":"rf__wrapper",...tp,onScroll:tv,style:{...to,...op},ref:tm,className:v(["react-flow",r,tx]),id:tr,role:"application",children:(0,y.jsxs)(og,{nodes:e,edges:t,width:td,height:tu,fitView:eG,fitViewOptions:eJ,minZoom:ep,maxZoom:em,nodeOrigin:eu,nodeExtent:eb,children:[(0,y.jsx)(oc,{onInit:d,onNodeClick:l,onEdgeClick:s,onNodeMouseEnter:M,onNodeMouseMove:C,onNodeMouseLeave:N,onNodeContextMenu:k,onNodeDoubleClick:P,nodeTypes:i,edgeTypes:a,connectionLineType:X,connectionLineStyle:Y,connectionLineComponent:K,connectionLineContainerStyle:W,selectionKeyCode:q,selectionOnDrag:Q,selectionMode:G,deleteKeyCode:U,multiSelectionKeyCode:ee,panActivationKeyCode:J,zoomActivationKeyCode:et,onlyRenderVisibleElements:er,defaultViewport:eg,translateExtent:ex,minZoom:ep,maxZoom:em,preventScrolling:ev,zoomOnScroll:eS,zoomOnPinch:eE,zoomOnDoubleClick:ek,panOnScroll:eM,panOnScrollSpeed:eC,panOnScrollMode:eN,panOnDrag:eP,onPaneClick:ej,onPaneMouseEnter:eI,onPaneMouseMove:eD,onPaneMouseLeave:e$,onPaneScroll:eA,onPaneContextMenu:eR,paneClickDistance:e_,nodeClickDistance:ez,onSelectionContextMenu:H,onSelectionStart:T,onSelectionEnd:V,onReconnect:eO,onReconnectStart:eB,onReconnectEnd:eH,onEdgeContextMenu:eT,onEdgeDoubleClick:eV,onEdgeMouseEnter:eF,onEdgeMouseMove:eZ,onEdgeMouseLeave:eX,reconnectRadius:eY,defaultMarkerColor:ew,noDragClassName:eU,noWheelClassName:eq,noPanClassName:eQ,rfId:ty,disableKeyboardA11y:e6,nodeExtent:eb,viewport:tl,onViewportChange:ts}),(0,y.jsx)(tY,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:m,onConnectStart:b,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:E,nodesDraggable:ea,autoPanOnNodeFocus:el,nodesConnectable:es,nodesFocusable:ed,edgesFocusable:ec,edgesReconnectable:ef,elementsSelectable:eh,elevateNodesOnSelect:e5,elevateEdgesOnSelect:e4,minZoom:ep,maxZoom:em,nodeExtent:eb,onNodesChange:eK,onEdgesChange:eW,snapToGrid:en,snapGrid:eo,connectionMode:Z,translateExtent:ex,connectOnClick:e0,defaultEdgeOptions:e3,fitView:eG,fitViewOptions:eJ,onNodesDelete:$,onEdgesDelete:A,onDelete:R,onNodeDragStart:j,onNodeDrag:I,onNodeDragStop:D,onSelectionDrag:O,onSelectionDragStart:z,onSelectionDragStop:B,onMove:h,onMoveStart:g,onMoveEnd:p,noPanClassName:eQ,nodeOrigin:eu,rfId:ty,autoPanOnConnect:e7,autoPanOnNodeDrag:e8,autoPanSpeed:e9,onError:tn,connectionRadius:te,isValidConnection:tt,selectNodesOnDrag:ei,nodeDragThreshold:ti,connectionDragThreshold:ta,onBeforeDelete:F,debug:tf,ariaLabelConfig:tg}),(0,y.jsx)(tH,{onSelectionChange:_}),eL,(0,y.jsx)(tR,{proOptions:e2,position:e1}),(0,y.jsx)(t$,{rfId:ty,disableKeyboardA11y:e6})]})})});function oy(e){return tE((0,x.useCallback)(t=>t.nodeLookup.get(e),[e]),tv)}function ox({dimensions:e,lineWidth:t,variant:n,className:o}){return(0,y.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:v(["react-flow__background-pattern",n,o])})}function ov({radius:e,className:t}){return(0,y.jsx)("circle",{cx:e,cy:e,r:e,className:v(["react-flow__background-pattern","dots",t])})}(s=m||(m={})).Lines="lines",s.Dots="dots",s.Cross="cross";let ob={[m.Dots]:1,[m.Lines]:1,[m.Cross]:6},ow=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function oS({id:e,variant:t=m.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:a,bgColor:l,style:s,className:d,patternClassName:u}){let c=(0,x.useRef)(null),{transform:f,patternId:h}=tE(ow,tv),g=o||ob[t],p=t===m.Dots,b=t===m.Cross,w=Array.isArray(n)?n:[n,n],S=[w[0]*f[2]||1,w[1]*f[2]||1],E=g*f[2],M=Array.isArray(i)?i:[i,i],C=b?[E,E]:S,N=[M[0]*f[2]||1+C[0]/2,M[1]*f[2]||1+C[1]/2],k=`${h}${e||""}`;return(0,y.jsxs)("svg",{className:v(["react-flow__background",d]),style:{...s,...no,"--xy-background-color-props":l,"--xy-background-pattern-color-props":a},ref:c,"data-testid":"rf__background",children:[(0,y.jsx)("pattern",{id:k,x:f[0]%S[0],y:f[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`,children:p?(0,y.jsx)(ov,{radius:E/2,className:u}):(0,y.jsx)(ox,{dimensions:C,lineWidth:r,variant:t,className:u})}),(0,y.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}oS.displayName="Background";let oE=(0,x.memo)(oS);function oM(){return(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,y.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function oC(){return(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,y.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function oN(){return(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,y.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ok(){return(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,y.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function oP(){return(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,y.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function oj({children:e,className:t,...n}){return(0,y.jsx)("button",{type:"button",className:v(["react-flow__controls-button",t]),...n,children:e})}let oI=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function oD({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:a,onFitView:l,onInteractiveChange:s,className:d,children:u,position:c="bottom-left",orientation:f="vertical","aria-label":h}){let g=tM(),{isInteractive:p,minZoomReached:m,maxZoomReached:x,ariaLabelConfig:b}=tE(oI,tv),{zoomIn:w,zoomOut:S,fitView:E}=ne();return(0,y.jsxs)(tA,{className:v(["react-flow__controls","horizontal"===f?"horizontal":"vertical",d]),position:c,style:e,"data-testid":"rf__controls","aria-label":h??b["controls.ariaLabel"],children:[t&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(oj,{onClick:()=>{w(),i?.()},className:"react-flow__controls-zoomin",title:b["controls.zoomIn.ariaLabel"],"aria-label":b["controls.zoomIn.ariaLabel"],disabled:x,children:(0,y.jsx)(oM,{})}),(0,y.jsx)(oj,{onClick:()=>{S(),a?.()},className:"react-flow__controls-zoomout",title:b["controls.zoomOut.ariaLabel"],"aria-label":b["controls.zoomOut.ariaLabel"],disabled:m,children:(0,y.jsx)(oC,{})})]}),n&&(0,y.jsx)(oj,{className:"react-flow__controls-fitview",onClick:()=>{E(r),l?.()},title:b["controls.fitView.ariaLabel"],"aria-label":b["controls.fitView.ariaLabel"],children:(0,y.jsx)(oN,{})}),o&&(0,y.jsx)(oj,{className:"react-flow__controls-interactive",onClick:()=>{g.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),s?.(!p)},title:b["controls.interactive.ariaLabel"],"aria-label":b["controls.interactive.ariaLabel"],children:p?(0,y.jsx)(oP,{}):(0,y.jsx)(ok,{})}),u]})}oD.displayName="Controls",(0,x.memo)(oD);let o$=(0,x.memo)(function({id:e,x:t,y:n,width:o,height:r,style:i,color:a,strokeColor:l,strokeWidth:s,className:d,borderRadius:u,shapeRendering:c,selected:f,onClick:h}){let{background:g,backgroundColor:p}=i||{};return(0,y.jsx)("rect",{className:v(["react-flow__minimap-node",{selected:f},d]),x:t,y:n,rx:u,ry:u,width:o,height:r,style:{fill:a||g||p,stroke:l,strokeWidth:s},shapeRendering:c,onClick:h?t=>h(t,e):void 0})}),oA=e=>e.nodes.map(e=>e.id),oR=e=>e instanceof Function?e:()=>e,o_=(0,x.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:a,NodeComponent:l,onClick:s}){let{node:d,x:u,y:c,width:f,height:h}=tE(t=>{let{internals:n}=t.nodeLookup.get(e),o=n.userNode,{x:r,y:i}=n.positionAbsolute,{width:a,height:l}=ev(o);return{node:o,x:r,y:i,width:a,height:l}},tv);return d&&!d.hidden&&eb(d)?(0,y.jsx)(l,{x:u,y:c,width:f,height:h,style:d.style,selected:!!d.selected,className:o(d),color:t(d),borderRadius:r,strokeColor:n(d),strokeWidth:i,shapeRendering:a,onClick:s,id:d.id}):null});var oz=(0,x.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=o$,onClick:a}){let l=tE(oA,tv),s=oR(t),d=oR(e),u=oR(n),c="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,y.jsx)(y.Fragment,{children:l.map(e=>(0,y.jsx)(o_,{id:e,nodeColorFunc:s,nodeStrokeColorFunc:d,nodeClassNameFunc:u,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:a,shapeRendering:c},e))})});let oL=e=>!e.hidden,oO=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?el(Y(e.nodeLookup,{filter:oL}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function oB({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:l,bgColor:s,maskColor:d,maskStrokeColor:u,maskStrokeWidth:c,position:f="bottom-right",onClick:h,onNodeClick:g,pannable:p=!1,zoomable:m=!1,ariaLabel:b,inversePan:E,zoomStep:M=1,offsetScale:C=5}){let N=tM(),k=(0,x.useRef)(null),{boundingRect:P,viewBB:j,rfId:I,panZoom:D,translateExtent:A,flowWidth:R,flowHeight:_,ariaLabelConfig:z}=tE(oO,tv),L=e?.width??200,O=e?.height??150,B=Math.max(P.width/L,P.height/O),H=B*L,T=B*O,V=C*B,F=P.x-(H-P.width)/2-V,Z=P.y-(T-P.height)/2-V,X=H+2*V,Y=T+2*V,K=`react-flow__minimap-desc-${I}`,W=(0,x.useRef)(0),U=(0,x.useRef)();W.current=B,(0,x.useEffect)(()=>{if(k.current&&D)return U.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){let r=(0,w.select)(e);return{update:function({translateExtent:e,width:i,height:a,zoomStep:l=1,pannable:s=!0,zoomable:d=!0,inversePan:u=!1}){let c=[0,0],f=(0,$.default)().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(c=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",s?r=>{let l=n();if("mousemove"!==r.sourceEvent.type&&"touchmove"!==r.sourceEvent.type||!t)return;let s=[r.sourceEvent.clientX??r.sourceEvent.touches[0].clientX,r.sourceEvent.clientY??r.sourceEvent.touches[0].clientY],d=[s[0]-c[0],s[1]-c[1]];c=s;let f=o()*Math.max(l[2],Math.log(l[2]))*(u?-1:1),h={x:l[0]-d[0]*f,y:l[1]-d[1]*f};t.setViewportConstrained({x:h.x,y:h.y,zoom:l[2]},[[0,0],[i,a]],e)}:null).on("zoom.wheel",d?e=>{if("wheel"!==e.sourceEvent.type||!t)return;let o=n(),r=e.sourceEvent.ctrlKey&&ey()?10:1,i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*l,a=o[2]*Math.pow(2,i*r);t.scaleTo(a)}:null);r.call(f,{})},destroy:function(){r.on("zoom",null)},pointer:S.pointer}}({domNode:k.current,panZoom:D,getTransform:()=>N.getState().transform,getViewScale:()=>W.current}),()=>{U.current?.destroy()}},[D]),(0,x.useEffect)(()=>{U.current?.update({translateExtent:A,width:R,height:_,inversePan:E,pannable:p,zoomStep:M,zoomable:m})},[p,m,E,M,A,R,_]);let q=h?e=>{let[t,n]=U.current?.pointer(e)||[0,0];h(e,{x:t,y:n})}:void 0,Q=g?(0,x.useCallback)((e,t)=>{g(e,N.getState().nodeLookup.get(t).internals.userNode)},[]):void 0,G=b??z["minimap.ariaLabel"];return(0,y.jsx)(tA,{position:f,style:{...e,"--xy-minimap-background-color-props":"string"==typeof s?s:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof u?u:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof c?c*B:void 0,"--xy-minimap-node-background-color-props":"string"==typeof o?o:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof a?a:void 0},className:v(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,y.jsxs)("svg",{width:L,height:O,viewBox:`${F} ${Z} ${X} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":K,ref:k,onClick:q,children:[G&&(0,y.jsx)("title",{id:K,children:G}),(0,y.jsx)(oz,{onClick:Q,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:a,nodeComponent:l}),(0,y.jsx)("path",{className:"react-flow__minimap-mask",d:`M${F-V},${Z-V}h${X+2*V}v${Y+2*V}h${-X-2*V}z
        M${j.x},${j.y}h${j.width}v${j.height}h${-j.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}oB.displayName="MiniMap",(0,x.memo)(oB);let oH={[p.Line]:"right",[p.Handle]:"bottom-right"};(0,x.memo)(function({nodeId:e,position:t,variant:n=p.Handle,className:o,style:r,children:i,color:a,minWidth:l=10,minHeight:s=10,maxWidth:d=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:c=!1,resizeDirection:f,autoScale:h=!0,shouldResize:g,onResizeStart:m,onResize:b,onResizeEnd:S}){let E,M=nm(),C="string"==typeof e?e:M,N=tM(),k=(0,x.useRef)(null),P=n===p.Handle,j=tE((0,x.useCallback)((E=P&&h,e=>E?`${Math.max(1/e.transform[2],1)}`:void 0),[P,h]),tv),I=(0,x.useRef)(null),$=t??oH[n];(0,x.useEffect)(()=>{if(k.current&&C)return I.current||(I.current=function({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){let i=(0,w.select)(e),a={controlDirection:ti("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};return{update:function({controlPosition:e,boundaries:l,keepAspectRatio:s,resizeDirection:d,onResizeStart:u,onResize:c,onResizeEnd:f,shouldResize:h}){let g,p,m,y,x={...td},v={...tu};a={boundaries:l,resizeDirection:d,keepAspectRatio:s,controlDirection:ti(e)};let b=null,w=[],S=!1,E=D().on("start",e=>{let{nodeLookup:o,transform:r,snapGrid:i,snapToGrid:a,nodeOrigin:l,paneDomNode:s}=n();if(!(g=o.get(t)))return;b=s?.getBoundingClientRect()??null;let{xSnapped:d,ySnapped:c}=eE(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:a,containerBounds:b});if(v={...x={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},pointerX:d,pointerY:c,aspectRatio:x.width/x.height},p=void 0,g.parentId&&("parent"===g.extent||g.expandParent)){var f;m=(p=o.get(g.parentId))&&"parent"===g.extent?[[0,0],[(f=p).measured.width,f.measured.height]]:void 0}for(let[e,n]of(w=[],y=void 0,o))if(n.parentId===t&&(w.push({id:e,position:{...n.position},extent:n.extent}),"parent"===n.extent||n.expandParent)){let e=function(e,t,n){let o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,l=n[0]*i,s=n[1]*a;return[[o-l,r-s],[o+i-l,r+a-s]]}(n,g,n.origin??l);y=y?[[Math.min(e[0][0],y[0][0]),Math.min(e[0][1],y[0][1])],[Math.max(e[1][0],y[1][0]),Math.max(e[1][1],y[1][1])]]:e}u?.(e,{...x})}).on("drag",e=>{let{transform:t,snapGrid:r,snapToGrid:i,nodeOrigin:l}=n(),s=eE(e.sourceEvent,{transform:t,snapGrid:r,snapToGrid:i,containerBounds:b}),d=[];if(!g)return;let{x:u,y:f,width:E,height:M}=x,C={},N=g.origin??l,{width:k,height:P,x:j,y:I}=function(e,t,n,o,r,i,a,l){var s,d,u,c;let{affectsX:f,affectsY:h}=t,{isHorizontal:g,isVertical:p}=t,m=g&&p,{xSnapped:y,ySnapped:x}=n,{minWidth:v,maxWidth:b,minHeight:w,maxHeight:S}=o,{x:E,y:M,width:C,height:N,aspectRatio:k}=e,P=Math.floor(g?y-e.pointerX:0),j=Math.floor(p?x-e.pointerY:0),I=C+(f?-P:P),D=N+(h?-j:j),$=-i[0]*C,A=-i[1]*N,R=ts(I,v,b),_=ts(D,w,S);if(a){let e=0,t=0;f&&P<0?e=ta(E+P+$,a[0][0]):!f&&P>0&&(e=tl(E+I+$,a[1][0])),h&&j<0?t=ta(M+j+A,a[0][1]):!h&&j>0&&(t=tl(M+D+A,a[1][1])),R=Math.max(R,e),_=Math.max(_,t)}if(l){let e=0,t=0;f&&P>0?e=tl(E+P,l[0][0]):!f&&P<0&&(e=ta(E+I,l[1][0])),h&&j>0?t=tl(M+j,l[0][1]):!h&&j<0&&(t=ta(M+D,l[1][1])),R=Math.max(R,e),_=Math.max(_,t)}if(r){if(g){(R=Math.max(R,ts(I/k,w,S)*k),a)&&(R=Math.max(R,(f||h)&&(!f||h||!m)?ta(M+A+(f?P:-P)/k,a[0][1])*k:tl(M+A+I/k,a[1][1])*k));l&&(R=Math.max(R,(f||h)&&(!f||h||!m)?tl(M+(f?P:-P)/k,l[0][1])*k:ta(M+I/k,l[1][1])*k))}if(p){(_=Math.max(_,ts(D*k,v,b)/k),a)&&(_=Math.max(_,(f||h)&&(!h||f||!m)?ta(E+(h?j:-j)*k+$,a[0][0])/k:tl(E+D*k+$,a[1][0])/k));l&&(_=Math.max(_,(f||h)&&(!h||f||!m)?tl(E+(h?j:-j)*k,l[0][0])/k:ta(E+D*k,l[1][0])/k))}}j+=j<0?_:-_,P+=P<0?R:-R,r&&(m?I>D*k?j=((s=f,d=h,s?!d:d)?-P:P)/k:P=((u=f,c=h,u?!c:c)?-j:j)*k:g?(j=P/k,h=f):(P=j*k,f=h));let z=f?E+P:E,L=h?M+j:M;return{width:C+(f?-P:P),height:N+(h?-j:j),x:i[0]*P*(f?-1:1)+z,y:i[1]*j*(h?-1:1)+L}}(v,a.controlDirection,s,a.boundaries,a.keepAspectRatio,N,m,y),D=k!==E,$=P!==M,A=j!==u&&D,R=I!==f&&$;if(!A&&!R&&!D&&!$)return;if((A||R||1===N[0]||1===N[1])&&(C.x=A?j:x.x,C.y=R?I:x.y,x.x=C.x,x.y=C.y,w.length>0)){let e=j-u,t=I-f;for(let n of w)n.position={x:n.position.x-e+N[0]*(k-E),y:n.position.y-t+N[1]*(P-M)},d.push(n)}if((D||$)&&(C.width=D&&(!a.resizeDirection||"horizontal"===a.resizeDirection)?k:x.width,C.height=$&&(!a.resizeDirection||"vertical"===a.resizeDirection)?P:x.height,x.width=C.width,x.height=C.height),p&&g.expandParent){let e=N[0]*(C.width??0);C.x&&C.x<e&&(x.x=e,v.x=v.x-(C.x-e));let t=N[1]*(C.height??0);C.y&&C.y<t&&(x.y=t,v.y=v.y-(C.y-t))}let _=function({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){let a=e-t,l=n-o,s=[a>0?1:a<0?-1:0,l>0?1:l<0?-1:0];return a&&r&&(s[0]=-1*s[0]),l&&i&&(s[1]=-1*s[1]),s}({width:x.width,prevWidth:E,height:x.height,prevHeight:M,affectsX:a.controlDirection.affectsX,affectsY:a.controlDirection.affectsY}),z={...x,direction:_};!1!==h?.(e,z)&&(S=!0,c?.(e,z),o(C,d))}).on("end",e=>{S&&(f?.(e,{...x}),r?.({...x}),S=!1)});i.call(E)},destroy:function(){i.on(".drag",null)}}}({domNode:k.current,nodeId:C,getStoreItems:()=>{let{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:i}=N.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,t)=>{let{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:i}=N.getState(),a=[],l={x:e.x,y:e.y},s=o.get(C);if(s&&s.expandParent&&s.parentId){let t=s.origin??i,n=e.width??s.measured.width??0,d=e.height??s.measured.height??0,u=eQ([{id:s.id,parentId:s.parentId,rect:{width:n,height:d,...ew({x:e.x??s.position.x,y:e.y??s.position.y},{width:n,height:d},s.parentId,o,t)}}],o,r,i);a.push(...u),l.x=e.x?Math.max(t[0]*n,e.x):void 0,l.y=e.y?Math.max(t[1]*d,e.y):void 0}if(void 0!==l.x&&void 0!==l.y){let e={id:C,type:"position",position:{...l}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){let t={id:C,type:"dimensions",resizing:!0,setAttributes:!f||("horizontal"===f?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(let e of t){let t={...e,type:"position"};a.push(t)}n(a)},onEnd:({width:e,height:t})=>{N.getState().triggerNodeChanges([{id:C,type:"dimensions",resizing:!1,dimensions:{width:e,height:t}}])}})),I.current.update({controlPosition:$,boundaries:{minWidth:l,minHeight:s,maxWidth:d,maxHeight:u},keepAspectRatio:c,resizeDirection:f,onResizeStart:m,onResize:b,onResizeEnd:S,shouldResize:g}),()=>{I.current?.destroy()}},[$,l,s,d,u,c,m,b,S,g]);let A=$.split("-");return(0,y.jsx)("div",{className:v(["react-flow__resize-control","nodrag",...A,n,o]),ref:k,style:{...r,scale:j,...a&&{[P?"backgroundColor":"borderColor"]:a}},children:i})}),e.s(["Canvas",0,({children:e,...t})=>(0,y.jsxs)(om,{deleteKeyCode:["Backspace","Delete"],fitView:!0,panOnDrag:!1,panOnScroll:!0,selectionOnDrag:!0,zoomOnDoubleClick:!1,...t,children:[(0,y.jsx)(oE,{bgColor:"var(--sidebar)"}),e]})],552518);let oT=(e,t)=>{let n=t===g.Left?"target":"source",o=e.internals.handleBounds?.[n]?.find(e=>e.position===t);if(!o)return[0,0];let r=o.width/2,i=o.height/2;switch(t){case g.Left:r=0;break;case g.Right:r=o.width;break;case g.Top:i=0;break;case g.Bottom:i=o.height;break;default:throw Error(`Invalid handle position: ${t}`)}return[e.internals.positionAbsolute.x+o.x+r,e.internals.positionAbsolute.y+o.y+i]};e.s(["Edge",0,{Temporary:({id:e,sourceX:t,sourceY:n,targetX:o,targetY:r,sourcePosition:i,targetPosition:a})=>{let[l]=nH({sourceX:t,sourceY:n,sourcePosition:i,targetX:o,targetY:r,targetPosition:a});return(0,y.jsx)(nO,{className:"stroke-1 stroke-ring",id:e,path:l,style:{strokeDasharray:"5, 5"}})},Animated:({id:e,source:t,target:n,markerEnd:o,style:r})=>{let i=oy(t),a=oy(n);if(!(i&&a))return null;let{sx:l,sy:s,tx:d,ty:u,sourcePos:c,targetPos:f}=((e,t)=>{let n=g.Right,[o,r]=oT(e,n),i=g.Left,[a,l]=oT(t,i);return{sx:o,sy:r,tx:a,ty:l,sourcePos:n,targetPos:i}})(i,a),[h]=eA({sourceX:l,sourceY:s,sourcePosition:c,targetX:d,targetY:u,targetPosition:f});return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(nO,{id:e,markerEnd:o,path:h,style:r}),(0,y.jsx)("circle",{fill:"var(--primary)",r:"4",children:(0,y.jsx)("animateMotion",{dur:"2s",path:h,repeatCount:"indefinite"})})]})}}],886586);var oV=e.i(481893),oF=e.i(590004);e.s(["Node",0,({handles:e,className:t,...n})=>(0,y.jsxs)(oV.Card,{className:(0,oF.cn)("node-container relative size-full h-auto w-sm gap-0 rounded-md p-0",t),...n,children:[e.target&&(0,y.jsx)(nx,{position:g.Left,type:"target"}),e.source&&(0,y.jsx)(nx,{position:g.Right,type:"source"}),n.children]}),"NodeContent",0,({className:e,...t})=>(0,y.jsx)(oV.CardContent,{className:(0,oF.cn)("p-3",e),...t}),"NodeDescription",0,e=>(0,y.jsx)(oV.CardDescription,{...e}),"NodeFooter",0,({className:e,...t})=>(0,y.jsx)(oV.CardFooter,{className:(0,oF.cn)("rounded-b-md border-t bg-secondary p-3!",e),...t}),"NodeHeader",0,({className:e,...t})=>(0,y.jsx)(oV.CardHeader,{className:(0,oF.cn)("gap-0.5 rounded-t-md border-b bg-secondary p-3!",e),...t}),"NodeTitle",0,e=>(0,y.jsx)(oV.CardTitle,{...e})],578355)}]);