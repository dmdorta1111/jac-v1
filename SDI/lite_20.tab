BEGIN_ASM_DESCR

	DECLARE_VARIABLE INTEGER OPERATION
	
	OPERATION = 2
	
	IF FRAME_ELEVATION == 3 AND SECTION == 0
		RETRIEVE_MDL frame_3_0.asm FRAME_ASM
	ELSE_IF FRAME_ELEVATION == 3 AND SECTION == 1
		RETRIEVE_MDL frame_3_1.asm FRAME_ASM
	ELSE_IF FRAME_ELEVATION == 3 AND SECTION == 2
		RETRIEVE_MDL frame_3_2.asm FRAME_ASM
	END_IF

	SEARCH_MDL_REF ASSEM CSYS "FRAME" ATTACH
	SEARCH_MDL_REF FRAME_ASM CSYS "ASM_DEF_CSYS" PLACEMENT
		ASSEMBLE FRAME_ASM ASSEM
			CSYS ATTACH PLACEMENT
		END_ASSEMBLE

	SET_MDL_NAME FRAME_ASM "FRAME_ASM_"+SO_NUM+"_"+ ITEM_NUM
	SEARCH_MDL_REF ASSEM ASSEMBLY "FRAME_ASM_"+SO_NUM+"_"+ ITEM_NUM FRAME_ASM

	SEARCH_MDL_REF RECURSIVE ASSEM COMPONENT "*JAMB*L*" JAMB1
	SET_MDL_NAME JAMB1 "JAMB1_"+SO_NUM+"_"+ ITEM_NUM
	SEARCH_MDL_REF RECURSIVE ASSEM COMPONENT "JAMB1_"+SO_NUM+"_"+ ITEM_NUM JAMB1

	SEARCH_MDL_REF RECURSIVE ASSEM COMPONENT "*JAMB*R*" JAMB2
	SET_MDL_NAME JAMB2 "JAMB2_"+SO_NUM+"_"+ ITEM_NUM
	SEARCH_MDL_REF RECURSIVE ASSEM COMPONENT "JAMB2_"+SO_NUM+"_"+ ITEM_NUM JAMB2

	SEARCH_MDL_REF RECURSIVE ASSEM COMPONENT "HEAD*" HEAD
	SET_MDL_NAME HEAD "HEAD_"+SO_NUM+"_"+ ITEM_NUM
	SEARCH_MDL_REF RECURSIVE ASSEM COMPONENT "HEAD_"+SO_NUM+"_"+ ITEM_NUM HEAD

	SET_MDL_PARAM FRAME_ASM "CUSTOMER_NAME" CUSTOMER_NAME
	SET_MDL_PARAM FRAME_ASM "JOB_NAME" JOB_NAME
	SET_MDL_PARAM FRAME_ASM "SO_NUM" SO_NUM

	SET_MDL_PARAM FRAME_ASM "SUB_JOB_NAME" SUB_JOB_NAME
	SET_MDL_PARAM FRAME_ASM "ITEM_NUM" ITEM_NUM
	SET_MDL_PARAM FRAME_ASM "QTY" QTY
	SET_MDL_PARAM FRAME_ASM "ITEM_DESC" FRAME_ITEM_DESC

	SET_MDL_PARAM FRAME_ASM "RABBET" RABBET
	SET_MDL_PARAM FRAME_ASM "XRABBET" XRABBET
	SET_MDL_PARAM FRAME_ASM "STOPP" STOPP
	SET_MDL_PARAM FRAME_ASM "HEAD_STOPP" HEAD_STOPP
	SET_MDL_PARAM FRAME_ASM "JD" JD
	SET_MDL_PARAM FRAME_ASM "JOW" JOW
	SET_MDL_PARAM FRAME_ASM "JOH" JOH+TRANSOM_PANEL_HEIGHT
	SET_MDL_PARAM FRAME_ASM "FACEE" FACEE
	SET_MDL_PARAM FRAME_ASM "XFACEE" XFACEE
	SET_MDL_PARAM FRAME_ASM "HEAD" HEAD
	SET_MDL_PARAM FRAME_ASM "XHEAD" XHEAD
	SET_MDL_PARAM FRAME_ASM "RETURN" RETURN
	SET_MDL_PARAM FRAME_ASM "XRETURN" XRETURN
	SET_MDL_PARAM FRAME_ASM "HAND" HAND
	SET_MDL_PARAM FRAME_ASM "ANCHOR_CTR" -ANCHOR_CTR


	SET_MDL_PARAM JAMB1 "SMT_THICKNESS" FR_THICKNESS
	SET_MDL_PARAM JAMB1 "TYPE" MAT_TYPE
	SET_MDL_PARAM JAMB1 "GRADE"FRAME_GRADE
	SET_MDL_PARAM JAMB1 "FINISH" FRAME_FINISH
	SET_MDL_PARAM JAMB1 "GRAIN" 1
	SET_MDL_PARAM JAMB1 "EMJACNUM" "JAMB1-"+ITEM_NUM

	SET_MDL_PARAM JAMB2 "SMT_THICKNESS" FR_THICKNESS
	SET_MDL_PARAM JAMB2 "TYPE" MAT_TYPE
	SET_MDL_PARAM JAMB2 "GRADE"FRAME_GRADE
	SET_MDL_PARAM JAMB2 "FINISH" FRAME_FINISH
	SET_MDL_PARAM JAMB2 "GRAIN" 1
	SET_MDL_PARAM JAMB2 "EMJACNUM" "JAMB2-"+ITEM_NUM

	SET_MDL_PARAM HEAD "SMT_THICKNESS" FR_THICKNESS
	SET_MDL_PARAM HEAD "TYPE" MAT_TYPE
	SET_MDL_PARAM HEAD "GRADE"FRAME_GRADE
	SET_MDL_PARAM HEAD "FINISH" FRAME_FINISH
	SET_MDL_PARAM HEAD "EMJACNUM" "HEAD-"+ITEM_NUM

	IF HEAD_GRAIN == "VERTICAL"
			SET_MDL_PARAM HEAD "GRAIN" 2
	ELSE_IF HEAD_GRAIN == "HORIZONTAL"
			SET_MDL_PARAM HEAD "GRAIN" 1
	END_IF
	
	IF FRAME_CONSTRUCTION == "FACE WELDED"
		SEARCH_MDL_REFS RECURSIVE ALLOW_SUPPRESSED FRAME_ASM FEATURE "TAB_RABBET" refFeats
			FOR refFeat REF ARRAY refFeats
				SET_FEATURE_STATE refFeat RESUMED
			END_FOR
		
		SEARCH_MDL_REFS RECURSIVE ALLOW_SUPPRESSED FRAME_ASM FEATURE "TAB_SOFFIT" refFeats
			FOR refFeat REF ARRAY refFeats
				SET_FEATURE_STATE refFeat RESUMED
			END_FOR
		
		IF XRABBET >= .75 
			SEARCH_MDL_REFS RECURSIVE ALLOW_SUPPRESSED FRAME_ASM FEATURE "TAB_XRABBET" refFeats
				FOR refFeat REF ARRAY refFeats
					SET_FEATURE_STATE refFeat RESUMED
				END_FOR		
		END_IF	
	END_IF
	
	IF FRAME_CONSTRUCTION == "FULLY WELDED"
		! SEARCH_MDL_REFS RECURSIVE ALLOW_SUPPRESSED FRAME_ASM FEATURE "WELD" refFeats
			! FOR refFeat REF ARRAY refFeats
				! SET_FEATURE_STATE refFeat RESUMED
			! END_FOR
	END_IF
	
	IF FRAME_CONSTRUCTION == "KNOCK DOWN"
	
	END_IF
	
	IF DW_RTRN <> "NO"
		SEARCH_MDL_REFS RECURSIVE ALLOW_SUPPRESSED ASSEM FEATURE "DW*"+DW_RTRN refFeats
			FOR refFeat REF ARRAY refFeats
				SET_FEATURE_STATE refFeat RESUMED
			END_FOR
	END_IF

	IF XDW_RTRN <> "NO"
		SEARCH_MDL_REFS RECURSIVE ALLOW_SUPPRESSED ASSEM FEATURE "XDW*"+XDW_RTRN refFeats
			FOR refFeat REF ARRAY refFeats
				SET_FEATURE_STATE refFeat RESUMED
			END_FOR
	END_IF
	
	IF SUB_TYPE == "P"
		SEARCH_MDL_REF ASSEM ASSEMBLY "FRAME_ASM_"+SO_NUM+"_"+ ITEM_NUM FRAME_ASM
		SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS

		CREATE_UDF udf\csys FRAME_ASM
			UDF_REF ATTACH ASM_CSYS
			UDF_DIM	ROTX 0
			UDF_DIM	ROTY 0
			UDF_DIM	ROTZ 0
			UDF_DIM	LOCX DOOR_CTR
			UDF_DIM	LOCY 0
			UDF_DIM	LOCZ 0
			UDF_EXP_REF DOOR_CTR_CSYS CSYS 0
		END_CREATE_UDF
	END_IF

	IF HOSPITAL_STOPS == "YES"
		SEARCH_MDL_REF ALLOW_SUPPRESSED JAMB1 FEATURE "*HOSPITAL*" refFeat1
			SET_FEATURE_STATE refFeat1 RESUMED
		SEARCH_MDL_REF ALLOW_SUPPRESSED JAMB2 FEATURE "*HOSPITAL*" refFeat2
			SET_FEATURE_STATE refFeat2 RESUMED
		REGEN_MDL ASSEM FORCE
		REGEN_MDL ASSEM FORCE
		SEARCH_MDL_REF JAMB1 CSYS "HOSPITAL_STOP*" FILLER
		SEARCH_FEAT_PARAM FILLER "MODEL" COMP
		SEARCH_FEAT_PARAM FILLER "LENGTH" LENGTH
		SEARCH_FEAT_PARAM FILLER "WIDTH" WIDTH
		RETRIEVE_MDL COMP COMP
		GET_MDL_NAME COMP PRT_NAME
		INSERT_FAMINSTANCE COMP "FILLER_" + SO_NUM + "_" + ITEM_NUM
		SET_FAMITEM_VALUE COMP "FILLER_" + SO_NUM + "_" + ITEM_NUM "LENGTH" LENGTH
		SET_FAMITEM_VALUE COMP "FILLER_" + SO_NUM + "_" + ITEM_NUM "WIDTH" WIDTH
		SET_FAMITEM_VALUE COMP "FILLER_" + SO_NUM + "_" + ITEM_NUM "SMT_THICKNESS" FR_THICKNESS
		GET_REF_FAMINSTANCE COMP "FILLER_" + SO_NUM + "_" + ITEM_NUM INST

		SEARCH_MDL_REF INST CSYS "PLACEMENT" PLACEMENT
			ASSEMBLE INST FRAME_ASM
				CSYS FILLER PLACEMENT
			END_ASSEMBLE

		SEARCH_MDL_REF JAMB2 CSYS "HOSPITAL_STOP*" FILLER
			ASSEMBLE INST FRAME_ASM
				CSYS FILLER PLACEMENT
			END_ASSEMBLE
	END_IF

	REGEN_MDL ASSEM FORCE
	
	IF HINGE_TYPE == "BUTT"
		CALL hinge_butt_frame.tab
	END_IF
	
	IF PRIMARY_STRIKE_UDF == "STRIKE T" AND SUB_TYPE == "S"
		IF HAND == "LH" OR HAND == "RHR"
			SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS
			CREATE_UDF udf\csys FRAME_ASM
			UDF_REF ATTACH ASM_CSYS
			UDF_DIM	ROTX 0
			UDF_DIM	ROTY 0
			UDF_DIM	ROTZ 0
			UDF_DIM	LOCX -(JOW/2)
			UDF_DIM	LOCY PRIMARY_STRIKE_CENTER
			UDF_DIM	LOCZ (JD/2)
			UDF_EXP_REF refCsys CSYS 0
			END_CREATE_UDF

			CREATE_UDF udf\strike FRAME_ASM
			UDF_REF ATTACH refCsys
			UDF_DIM	SETBACK RABBET/2
			UDF_DIM	STRIKE_WIDTH PRIMARY_STRIKE_WIDTH
			UDF_DIM	STRIKE_HEIGHT PRIMARY_STRIKE_HEIGHT
			UDF_DIM	STRIKE_LIP_HEIGHT PRIMARY_STRIKE_LIP_HEIGHT
			UDF_DIM	STRIKE_LIP_DEPTH PRIMARY_STRIKE_LIP_THICKNESS
			UDF_INTERSECTION * PART_LEVEL
			END_CREATE_UDF
		END_IF

		IF HAND == "RH" OR HAND == "LHR"
			SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS
			CREATE_UDF udf\csys FRAME_ASM
			UDF_REF ATTACH ASM_CSYS
			UDF_DIM	ROTX 0
			UDF_DIM	ROTY 0
			UDF_DIM	ROTZ 180
			UDF_DIM	LOCX (JOW/2)
			UDF_DIM	LOCY PRIMARY_STRIKE_CENTER
			UDF_DIM	LOCZ (JD/2)
			UDF_EXP_REF refCsys CSYS 0
			END_CREATE_UDF

			CREATE_UDF udf\strike FRAME_ASM
			UDF_REF ATTACH refCsys
			UDF_DIM	SETBACK RABBET/2
			UDF_DIM	STRIKE_WIDTH PRIMARY_STRIKE_WIDTH
			UDF_DIM	STRIKE_HEIGHT PRIMARY_STRIKE_HEIGHT
			UDF_DIM	STRIKE_LIP_HEIGHT PRIMARY_STRIKE_LIP_HEIGHT
			UDF_DIM	STRIKE_LIP_DEPTH PRIMARY_STRIKE_LIP_THICKNESS
			UDF_INTERSECTION * PART_LEVEL
			END_CREATE_UDF			
		END_IF

		RETRIEVE_MDL FRAME_STRIKE.ASM STRIKE
		SEARCH_MDL_REF STRIKE CSYS "PLACEMENT" PLACEMENT
		ASSEMBLE STRIKE FRAME_ASM
			CSYS refCsys PLACEMENT
		END_ASSEMBLE
		LOOKUP_FAMINSTANCE STRIKE "STRIKE_HEIGHT == PRIMARY_STRIKE_HEIGHT" INST_NAME
		GET_REF_FAMINSTANCE STRIKE INST_NAME STRIKE_INST
		REPLACE_COMPONENT STRIKE STRIKE_INST
		
		IF PRIMARY_STRIKE_DESC == "ELECTRIC"
			RETRIEVE_MDL DUST_BOX_ELEC_STRIKE.PRT PRT
			SEARCH_MDL_REF PRT CSYS "PLACEMENT" PLACEMENT
			ASSEMBLE PRT FRAME_ASM
				CSYS refCsys PLACEMENT
			END_ASSEMBLE
		END_IF
		
		IF PRIMARY_STRIKE_DESC <> "ELECTRIC" AND DUST_BOXES == "YES"
			RETRIEVE_MDL DUST_BOX.PRT PRT
			SEARCH_MDL_REF PRT CSYS "PLACEMENT" PLACEMENT
			ASSEMBLE PRT FRAME_ASM
				CSYS refCsys PLACEMENT
			END_ASSEMBLE
		END_IF
		
	END_IF

	IF PRIMARY_STRIKE_UDF == "STRIKE_VD_6111" AND SUB_TYPE == "S"
		IF HAND == "LH" OR HAND == "RHR"
			SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS
				CREATE_UDF udf\csys FRAME_ASM
				UDF_REF	ATTACH ASM_CSYS
				UDF_DIM	ROTX 0
				UDF_DIM	ROTY 0
				UDF_DIM	ROTZ 0
				UDF_DIM	LOCX -(JOW/2)+STOPP
				UDF_DIM	LOCY PRIMARY_STRIKE_CENTER
				UDF_DIM	LOCZ (JD/2)
				UDF_EXP_REF refCsys CSYS 0
			END_CREATE_UDF

			SEARCH_MDL_REF JAMB2 SURFACE "STOPP" STOPP
			
			CREATE_UDF udf\strike_vd_6111 JAMB2
				UDF_REF	ATTACH refCsys
				UDF_REF	STOPP	STOPP
				UDF_DIM	BACKSET	RABBET+PRIMARY_STRIKE_BACKSET	
				UDF_DIM	DEPTH 	(FR_THICKNESS+.03)*2
				UDF_DIM	FLAT_1	FR_THICKNESS+.03
				UDF_DIM	FLAT_2	FR_THICKNESS+.03
			END_CREATE_UDF
		
		END_IF

		IF HAND == "RH" OR HAND == "LHR"
			SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS
			CREATE_UDF udf\csys FRAME_ASM
				UDF_REF ATTACH ASM_CSYS
				UDF_DIM	ROTX 0
				UDF_DIM	ROTY 0
				UDF_DIM	ROTZ 180
				UDF_DIM	LOCX (JOW/2)-STOPP
				UDF_DIM	LOCY PRIMARY_STRIKE_CENTER
				UDF_DIM	LOCZ (JD/2)
				UDF_EXP_REF refCsys CSYS 0
			END_CREATE_UDF
			
			SEARCH_MDL_REF JAMB1 SURFACE "STOPP" STOPP

			CREATE_UDF udf\strike_vd_6111 JAMB1
				UDF_REF	ATTACH refCsys
				UDF_REF	STOPP	STOPP
				UDF_DIM	BACKSET	RABBET+PRIMARY_STRIKE_BACKSET	
				UDF_DIM	DEPTH 	(FR_THICKNESS+.03)*2
				UDF_DIM	FLAT_1	FR_THICKNESS+.03
				UDF_DIM	FLAT_2	FR_THICKNESS+.03
			END_CREATE_UDF
		END_IF

		
		RETRIEVE_MDL VD_6111.ASM STRIKE
		SEARCH_MDL_REF STRIKE CSYS "PLACEMENT" PLACEMENT
		ASSEMBLE STRIKE FRAME_ASM
			CSYS refCsys PLACEMENT
		END_ASSEMBLE
		SET_MDL_PARAM STRIKE "STRIKE_BACKSET" PRIMARY_STRIKE_BACKSET + RABBET
	END_IF
	
	CALL anchors.tab
	
	IF SILENCERS == "YES"
		SEARCH_MDL_REF ASSEM ASSEMBLY "FRAME_ASM_"+SO_NUM+"_"+ ITEM_NUM FRAME_ASM
		SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS
		IF SUB_TYPE == "S"
			IF HAND == "LHR" OR HAND == "LHRA" OR HAND == "LHR/RHR" OR \
			   HAND == "RH" OR HAND == "RHA" OR HAND == "LH/RH"
				CREATE_UDF udf\csys FRAME_ASM
					UDF_REF ATTACH ASM_CSYS
					UDF_DIM	ROTX 0
					UDF_DIM	ROTY 90
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX (JOW/2) - (STOPP/2)
					UDF_DIM	LOCY JOH - 8
					UDF_DIM	LOCZ (JD/2) - RABBET
					UDF_EXP_REF refCsys CSYS 0
				END_CREATE_UDF
				CREATE_UDF udf\hole FRAME_ASM
					UDF_REF ATTACH refCsys
					UDF_DIM	DIA SILENCER_HOLE_DIA
					UDF_DIM	DEPTH .25
					UDF_INTERSECTION * PART_LEVEL
				END_CREATE_UDF
				CREATE_UDF udf\csys FRAME_ASM
					UDF_REF ATTACH ASM_CSYS
					UDF_DIM	ROTX 0
					UDF_DIM	ROTY 90
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX (JOW/2) - (STOPP/2)
					UDF_DIM	LOCY PRIMARY_STRIKE_CENTER
					UDF_DIM	LOCZ (JD/2) - RABBET
					UDF_EXP_REF refCsys CSYS 0
				END_CREATE_UDF
				CREATE_UDF udf\hole FRAME_ASM
					UDF_REF ATTACH refCsys
					UDF_DIM	DIA SILENCER_HOLE_DIA
					UDF_DIM	DEPTH .25
					UDF_INTERSECTION * PART_LEVEL
				END_CREATE_UDF
				CREATE_UDF udf\csys FRAME_ASM
					UDF_REF ATTACH ASM_CSYS
					UDF_DIM	ROTX 0
					UDF_DIM	ROTY 90
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX (JOW/2) - (STOPP/2)
					UDF_DIM	LOCY 8
					UDF_DIM	LOCZ (JD/2) - RABBET
					UDF_EXP_REF refCsys CSYS 0
				END_CREATE_UDF
				CREATE_UDF udf\hole FRAME_ASM
					UDF_REF ATTACH refCsys
					UDF_DIM	DIA SILENCER_HOLE_DIA
					UDF_DIM	DEPTH .25
					UDF_INTERSECTION * PART_LEVEL
				END_CREATE_UDF
			END_IF
			IF HAND == "RHR" OR HAND == "RHRA" OR HAND == "LHR/RHR" OR \
			  HAND == "LH" OR HAND == "LHA" OR HAND == "LH/RH"
				CREATE_UDF udf\csys FRAME_ASM
					UDF_REF ATTACH ASM_CSYS
					UDF_DIM	ROTX 0
					UDF_DIM	ROTY 90
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX -((JOW/2) - (STOPP/2))
					UDF_DIM	LOCY JOH - 8
					UDF_DIM	LOCZ (JD/2) - RABBET
					UDF_EXP_REF refCsys CSYS 0
				END_CREATE_UDF
				CREATE_UDF udf\hole FRAME_ASM
					UDF_REF ATTACH refCsys
					UDF_DIM	DIA SILENCER_HOLE_DIA
					UDF_DIM	DEPTH .25
					UDF_INTERSECTION * PART_LEVEL
				END_CREATE_UDF
				CREATE_UDF udf\csys FRAME_ASM
					UDF_REF ATTACH ASM_CSYS
					UDF_DIM	ROTX 0
					UDF_DIM	ROTY 90
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX -((JOW/2) - (STOPP/2))
					UDF_DIM	LOCY PRIMARY_STRIKE_CENTER
					UDF_DIM	LOCZ (JD/2) - RABBET
					UDF_EXP_REF refCsys CSYS 0
				END_CREATE_UDF
				CREATE_UDF udf\hole FRAME_ASM
					UDF_REF ATTACH refCsys
					UDF_DIM	DIA SILENCER_HOLE_DIA
					UDF_DIM	DEPTH .25
					UDF_INTERSECTION * PART_LEVEL
				END_CREATE_UDF
				CREATE_UDF udf\csys FRAME_ASM
					UDF_REF ATTACH ASM_CSYS
					UDF_DIM	ROTX 0
					UDF_DIM	ROTY 90
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX -((JOW/2) - (STOPP/2))
					UDF_DIM	LOCY 8
					UDF_DIM	LOCZ (JD/2) - RABBET
					UDF_EXP_REF refCsys CSYS 0
				END_CREATE_UDF
				CREATE_UDF udf\hole FRAME_ASM
					UDF_REF ATTACH refCsys
					UDF_DIM	DIA SILENCER_HOLE_DIA
					UDF_DIM	DEPTH .25
					UDF_INTERSECTION * PART_LEVEL
				END_CREATE_UDF
			END_IF
		END_IF
		IF SUB_TYPE == "P"
			CREATE_UDF udf\csys FRAME_ASM
				UDF_REF ATTACH DOOR_CTR_CSYS
				UDF_DIM	ROTX 0
				UDF_DIM	ROTY 90
				UDF_DIM	ROTZ 0
				UDF_DIM	LOCX 6
				UDF_DIM	LOCY JOH - (HEAD_STOPP/2)
				UDF_DIM	LOCZ (JD/2) - RABBET
				UDF_EXP_REF refCsys CSYS 0
			END_CREATE_UDF
			CREATE_UDF udf\hole FRAME_ASM
				UDF_REF ATTACH refCsys
				UDF_DIM	DIA SILENCER_HOLE_DIA
				UDF_DIM	DEPTH .25
				UDF_INTERSECTION * PART_LEVEL
			END_CREATE_UDF
			CREATE_UDF udf\csys FRAME_ASM
				UDF_REF ATTACH DOOR_CTR_CSYS
				UDF_DIM	ROTX 0
				UDF_DIM	ROTY 90
				UDF_DIM	ROTZ 0
				UDF_DIM	LOCX -6
				UDF_DIM	LOCY JOH - (HEAD_STOPP/2)
				UDF_DIM	LOCZ (JD/2) - RABBET
				UDF_EXP_REF refCsys CSYS 0
			END_CREATE_UDF
			CREATE_UDF udf\hole FRAME_ASM
				UDF_REF ATTACH refCsys
				UDF_DIM	DIA SILENCER_HOLE_DIA
				UDF_DIM	DEPTH .25
				UDF_INTERSECTION * PART_LEVEL
			END_CREATE_UDF
		END_IF
	END_IF
	
	! BEGIN FRAME PREPS - CONTINUOUS HINGE
	IF HINGE_TYPE == "CONTINUOUS"
		IF HAND == "LHR" OR HAND == "LHRA" OR HAND == "LHR/RHR" OR \
		  HAND == "RH" OR HAND == "RHA" OR HAND == "LH/RH"
			SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS
			CREATE_UDF udf\csys FRAME_ASM
				UDF_REF ATTACH ASM_CSYS
				UDF_DIM	ROTX 0
				UDF_DIM	ROTY 0
				UDF_DIM	ROTZ 0
				UDF_DIM	LOCX -(JOW/2) - FR_THICKNESS
				UDF_DIM	LOCY JOH
				UDF_DIM	LOCZ (JD/2) - ((RABBET+FR_THICKNESS)/2)
				UDF_EXP_REF ASM_CSYS CSYS 0
			END_CREATE_UDF

			RETRIEVE_MDL BU_FLAT.PRT COMP
			SEARCH_MDL_REF COMP CSYS "PLACEMENT" PLACEMENT
			ASSEMBLE COMP FRAME_ASM
				 CSYS ASM_CSYS PLACEMENT
			END_ASSEMBLE

			INSERT_FAMINSTANCE COMP "COMP_1_"+ ITEM_NUM
			SET_FAMITEM_VALUE COMP "COMP_1_"+ ITEM_NUM "LENGTH" JOH - 2
			SET_FAMITEM_VALUE COMP "COMP_1_"+ ITEM_NUM "WIDTH" RABBET - ((FR_THICKNESS+.03)*2)
			SET_FAMITEM_VALUE COMP "COMP_1_"+ ITEM_NUM "SMT_THICKNESS" .105
			GET_REF_FAMINSTANCE COMP "COMP_1_"+ ITEM_NUM INST
			REPLACE_COMPONENT COMP INST
		END_IF

		IF HAND == "RHR" OR HAND == "RHRA" OR HAND == "LHR/RHR" OR \
		  HAND == "LH" OR HAND == "LHA" OR HAND == "LH/RH"
			SEARCH_MDL_REF FRAME_ASM CSYS "ORIENT" ASM_CSYS
			CREATE_UDF udf\csys FRAME_ASM
				UDF_REF ATTACH ASM_CSYS
				UDF_DIM	ROTX 180
				UDF_DIM	ROTY 0
				UDF_DIM	ROTZ 180
				UDF_DIM	LOCX (JOW/2) + FR_THICKNESS
				UDF_DIM	LOCY JOH
				UDF_DIM	LOCZ (JD/2) - ((RABBET+FR_THICKNESS)/2)
				UDF_EXP_REF ASM_CSYS CSYS 0
			END_CREATE_UDF

			RETRIEVE_MDL BU_FLAT.PRT COMP
			SEARCH_MDL_REF COMP CSYS "PLACEMENT" PLACEMENT
			ASSEMBLE COMP FRAME_ASM
				 CSYS ASM_CSYS PLACEMENT
			END_ASSEMBLE

			INSERT_FAMINSTANCE COMP "COMP_2_"+ ITEM_NUM
			SET_FAMITEM_VALUE COMP "COMP_2_"+ ITEM_NUM "LENGTH" JOH - 2
			SET_FAMITEM_VALUE COMP "COMP_2_"+ ITEM_NUM "WIDTH" RABBET - ((FR_THICKNESS+.03)*2)
			SET_FAMITEM_VALUE COMP "COMP_2_"+ ITEM_NUM "SMT_THICKNESS" .105
			GET_REF_FAMINSTANCE COMP "COMP_2_"+ ITEM_NUM INST
			REPLACE_COMPONENT COMP INST
		END_IF
	END_IF
	! END FRAME PREPS - CONTINUOUS HINGE

	IF CLOSER == 1 OR AUTO_OPERATOR == 1
		CALL closers.tab
	END_IF

	IF (FLUSH_BOLTS == 1 OR FLUSH_BOLTS == 3) AND SUB_TYPE == "P"
		CREATE_UDF udf\csys FRAME_ASM
			UDF_REF ATTACH DOOR_CTR_CSYS
			UDF_DIM	ROTX 0
			UDF_DIM	ROTY 0
			UDF_DIM	ROTZ 0
			UDF_DIM	LOCX 0
			UDF_DIM	LOCY JOH + FR_THICKNESS +.01
			UDF_DIM	LOCZ (JD/2) - (RABBET/2)
			UDF_EXP_REF refCsys CSYS 0
		END_CREATE_UDF
		CREATE_UDF udf\rect_cut FRAME_ASM
			UDF_REF ATTACH refCsys
			UDF_DIM	DIMY .25
			UDF_DIM	DIMZ 1.015
			UDF_DIM	DIMX 3.515
			UDF_INTERSECTION * PART_LEVEL
		END_CREATE_UDF
		RETRIEVE_MDL FLUSH_BOLT_HEAD_ASM.ASM FLBLT
		SEARCH_MDL_REF FLBLT CSYS "PLACEMENT" PLACEMENT
		ASSEMBLE FLBLT FRAME_ASM
			CSYS refCsys PLACEMENT
		END_ASSEMBLE
	END_IF


	RETRIEVE_MDL DRAWING_ANCHOR.ASM SECTION
	GET_MDL_NAME SECTION SECTION_NAME
	INSERT_FAMINSTANCE SECTION SECTION_NAME+"_"+ ITEM_NUM
	GET_REF_FAMINSTANCE SECTION SECTION_NAME+"_"+ ITEM_NUM SECTION
	SET_MDL_PARAM SECTION "ANCHOR_CTR" -ANCHOR_CTR
	SET_MDL_PARAM SECTION "OFFSET" FR_THICKNESS + .03
	SEARCH_MDL_REF SECTION CSYS "PLACEMENT" ATTACH

	! ASSEMBLE SECTION ASSEM
		! PACKAGED
	! END_ASSEMBLE
	
	GET_MDL_NAME JAMB1 JAMB1_NAME
	INSERT_FAMINSTANCE JAMB1 "JAMB_"+ ITEM_NUM
	GET_REF_FAMINSTANCE JAMB1 "JAMB_"+ ITEM_NUM JAMB
	SEARCH_MDL_REF JAMB CSYS "PLACEMENT" PLACEMENT

	ASSEMBLE JAMB SECTION
		CSYS ATTACH PLACEMENT
	END_ASSEMBLE

	SEARCH_MDL_REF SECTION CSYS "ACS0" ATTACH
	SEARCH_MDL_REF ANCHOR CSYS "PLACEMENT" PLACEMENT

	ASSEMBLE ANCHOR SECTION
		CSYS ATTACH PLACEMENT
	END_ASSEMBLE

	! SET_FEATURE_STATE SECTION SUPPRESSED
	
	
	
END_ASM_DESCR

