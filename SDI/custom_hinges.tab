
BEGIN_GUI_DESCR

SHOW_PARAM INTEGER HINGE_QTY
SHOW_PARAM DOUBLE HINGE_HEIGHT

USER_INPUT_PARAM DOUBLE 	TOP_GAP REQUIRED

IF MAXIMUM_HINGE_SPACING == 0 OR (MAXIMUM_HINGE_SPACING > 0 AND CUSTOM_HINGE_QTY > 0)
	USER_INPUT_PARAM INTEGER CUSTOM_HINGE_QTY
END_IF
IF CUSTOM_HINGE_QTY == 0 OR (MAXIMUM_HINGE_SPACING > 0 AND CUSTOM_HINGE_QTY > 0)
	USER_INPUT_PARAM DOUBLE MAXIMUM_HINGE_SPACING
END_IF

USER_INPUT_PARAM DOUBLE 	JAMB_HINGE_SETBACK
USER_INPUT_PARAM DOUBLE 	DOOR_HINGE_SETBACK
USER_INPUT_PARAM DOUBLE 	DOOR_FACE_SETBACK	


IF HINGE_DIMENSION_METHOD == 0
	USER_INPUT_PARAM DOUBLE TOP_HINGE REQUIRED
	USER_INPUT_PARAM DOUBLE BOTTOM_HINGE REQUIRED
END_IF

IF HINGE_DIMENSION_METHOD == 1 OR HINGE_DIMENSION_METHOD == 2
	IF CUSTOM_HINGE_QTY >= 1
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_1 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 2
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_2 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 3
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_3 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 4
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_4 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 5
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_5 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 6
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_6 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 7
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_7 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 8
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_8 REQUIRED
	END_IF
	IF CUSTOM_HINGE_QTY >= 9
		USER_INPUT_PARAM DOUBLE HINGE_LOCATION_9 REQUIRED
	END_IF
END_IF

! CHECKBOX_PARAM INTEGER EQUAL_SPACING	
RADIOBUTTON_PARAM INTEGER HINGE_DIMENSION_METHOD "EQUAL SPACING" "TOP-CENTER" "TOP-TOP"

END_GUI_DESCR

BEGIN_ASM_DESCR

DECLARE_VARIABLE DOUBLE 	MAXIMUM_HINGE_SPACING
DECLARE_VARIABLE INTEGER 	HINGE_QTY
DECLARE_VARIABLE INTEGER 	CUSTOM_HINGE_QTY
DECLARE_VARIABLE DOUBLE 	HINGE_HEIGHT
DECLARE_VARIABLE DOUBLE 	TOP_HINGE
DECLARE_VARIABLE DOUBLE 	BOTTOM_HINGE
DECLARE_VARIABLE DOUBLE	TOP_GAP
DECLARE_VARIABLE DOUBLE 	DOOR_GAP
DECLARE_VARIABLE DOUBLE 	HINGE_SPACING 0
DECLARE_VARIABLE DOUBLE 	JOH
DECLARE_VARIABLE DOUBLE 	JAMB_HINGE_SETBACK
DECLARE_VARIABLE DOUBLE 	DOOR_HINGE_SETBACK
DECLARE_VARIABLE DOUBLE 	DOOR_FACE_SETBACK	
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_1
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_2
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_3
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_4
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_5
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_6
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_7
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_8
DECLARE_VARIABLE DOUBLE	HINGE_LOCATION_9
DECLARE_VARIABLE DOUBLE 	OFFSET 0
DECLARE_VARIABLE INTEGER	HINGE_DIMENSION_METHOD

DECLARE_VARIABLE INTEGER 	HINGE_INDEX
DECLARE_ARRAY HINGE_LOCATIONS_ARRAY
CLEAR_ARRAY HINGE_LOCATIONS_ARRAY



IF HINGE_DIMENSION_METHOD == 1 OR HINGE_DIMENSION_METHOD == 2
	IF HINGE_DIMENSION_METHOD == 1
		OFFSET = 0
	ELSE_IF HINGE_DIMENSION_METHOD == 2
		OFFSET = HINGE_HEIGHT/2
	END_IF
	
	TOP_HINGE = HINGE_LOCATION_1 - OFFSET
	HINGE_LOCATION_1 = TOP_HINGE
	IF HINGE_LOCATION_2 > 0
		HINGE_LOCATION_2 = HINGE_LOCATION_2 - OFFSET
		IF HINGE_QTY == 2
			BOTTOM_HINGE = JOH - HINGE_LOCATION_2
		END_IF
	END_IF
	IF HINGE_LOCATION_3 > 0
		HINGE_LOCATION_3 = HINGE_LOCATION_3 - OFFSET
		IF HINGE_QTY == 3
			BOTTOM_HINGE = JOH - HINGE_LOCATION_3
		END_IF
	END_IF
	IF HINGE_LOCATION_4 > 0
		HINGE_LOCATION_4 = HINGE_LOCATION_4 - OFFSET 
		IF HINGE_QTY == 4
			BOTTOM_HINGE = JOH - HINGE_LOCATION_4
		END_IF
	END_IF
	IF HINGE_LOCATION_5 > 0
		HINGE_LOCATION_5 = HINGE_LOCATION_5 - OFFSET 
		IF HINGE_QTY == 5
			BOTTOM_HINGE = JOH - HINGE_LOCATION_5
		END_IF
	END_IF
	IF HINGE_LOCATION_6 > 0
		HINGE_LOCATION_6 = HINGE_LOCATION_6 - OFFSET 
		IF HINGE_QTY == 6
			BOTTOM_HINGE = JOH - HINGE_LOCATION_6
		END_IF
	END_IF
	IF HINGE_LOCATION_7 > 0
		HINGE_LOCATION_7 = HINGE_LOCATION_7 - OFFSET 
		IF HINGE_QTY == 7
			BOTTOM_HINGE = JOH - HINGE_LOCATION_7
		END_IF
	END_IF
	IF HINGE_LOCATION_8 > 0
		HINGE_LOCATION_8 = HINGE_LOCATION_8 - OFFSET 
		IF HINGE_QTY == 8
			BOTTOM_HINGE = JOH - HINGE_LOCATION_8
		END_IF
	END_IF
	IF HINGE_LOCATION_9 > 0
		HINGE_LOCATION_9 = HINGE_LOCATION_9 - OFFSET 
		IF HINGE_QTY == 9
			BOTTOM_HINGE = JOH - HINGE_LOCATION_9
		END_IF
	END_IF
END_IF	


! CONFIG_ELEM

WHILE CUSTOM_HINGE_QTY > 0 AND MAXIMUM_HINGE_SPACING > 0 AND CUSTOM_HINGE_QTY <> ceil((JOH - TOP_HINGE - BOTTOM_HINGE)/MAXIMUM_HINGE_SPACING)+1
	MESSAGE_BOX "ANCHOR QTY AND MAXIMUM ANCHOR SPACING ARE IN CONFLICT"
	PRINT "ANCHOR QTY %" CUSTOM_HINGE_QTY
	PRINT " MAXIMUM SPACING %" MAXIMUM_HINGE_SPACING
	PRINT " ENTER Q TO USE QTY OR M TO USE MAXIMUM SPACING"
	USER_INPUT_PARAM STRING OPTION
	IF OPTION == "Q"
		MAXIMUM_HINGE_SPACING = 0
	ELSE_IF OPTION == "M"
		CUSTOM_HINGE_QTY = 0
	END_IF
END_WHILE
	
IF CUSTOM_HINGE_QTY == 0 AND MAXIMUM_HINGE_SPACING > 0
	HINGE_QTY = ceil((JOH-TOP_HINGE-BOTTOM_HINGE)/MAXIMUM_HINGE_SPACING)+1
ELSE_IF CUSTOM_HINGE_QTY > 1
	HINGE_QTY = CUSTOM_HINGE_QTY
END_IF

PRINT "%" HINGE_SPACING
PRINT "%" MAXIMUM_HINGE_SPACING
PRINT "%" JOH
PRINT "%" TOP_HINGE
PRINT "%" BOTTOM_HINGE
PRINT "%" HINGE_QTY

IF HINGE_DIMENSION_METHOD == 0
	HINGE_SPACING = (JOH - TOP_HINGE - BOTTOM_HINGE) / (HINGE_QTY - 1)
	ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY TOP_HINGE
	HINGE_INDEX = 1
	WHILE HINGE_INDEX <= HINGE_QTY-1
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY TOP_HINGE+(HINGE_INDEX * HINGE_SPACING)
		HINGE_INDEX++
	END_WHILE
! ELSE_IF HINGE_DIMENSION_METHOD == 2
	! HINGE_SPACING = (JOH-TOP_HINGE-BOTTOM_HINGE) / (HINGE_QTY - 1)
	! ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY TOP_HINGE+OFFSET
	! HINGE_INDEX = 1
	! WHILE HINGE_INDEX <= HINGE_QTY-1
		! ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY TOP_HINGE+OFFSET+(HINGE_INDEX * HINGE_SPACING)
		! HINGE_INDEX++
	! END_WHILE
END_IF

PRINT "XXXXXXXXXXXX"
PRINT "%" HINGE_SPACING
PRINT "%" MAXIMUM_HINGE_SPACING
PRINT "%" JOH
PRINT "%" TOP_HINGE
PRINT "%" BOTTOM_HINGE
PRINT "%" HINGE_QTY

IF HINGE_DIMENSION_METHOD == 1 OR HINGE_DIMENSION_METHOD == 2
	IF HINGE_DIMENSION_METHOD == 1
		OFFSET = 0
	ELSE_IF HINGE_DIMENSION_METHOD == 2
		OFFSET = HINGE_HEIGHT/2
	END_IF
	
	ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_1 + OFFSET)
	TOP_HINGE = HINGE_LOCATION_1 + OFFSET
	IF HINGE_LOCATION_2 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_2 + OFFSET)
		IF HINGE_QTY == 2
			BOTTOM_HINGE = JOH - HINGE_LOCATION_2 - OFFSET
		END_IF
	END_IF
	IF HINGE_LOCATION_3 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_3 + OFFSET)
		IF HINGE_QTY == 3
			BOTTOM_HINGE = JOH - HINGE_LOCATION_3 - OFFSET
		END_IF
	END_IF
	IF HINGE_LOCATION_4 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_4 + OFFSET)
		IF HINGE_QTY == 4
			BOTTOM_HINGE = JOH - HINGE_LOCATION_4 - OFFSET
		END_IF
	END_IF
	IF HINGE_LOCATION_5 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_5 + OFFSET)
		IF HINGE_QTY == 5
			BOTTOM_HINGE = JOH - HINGE_LOCATION_5 - OFFSET
		END_IF
	END_IF
	IF HINGE_LOCATION_6 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_6 + OFFSET)
		IF HINGE_QTY == 6
			BOTTOM_HINGE = JOH - HINGE_LOCATION_6 - OFFSET
		END_IF
	END_IF
	IF HINGE_LOCATION_7 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_7 + OFFSET)
		IF HINGE_QTY == 7
			BOTTOM_HINGE = JOH - HINGE_LOCATION_7 - OFFSET
		END_IF
	END_IF
	IF HINGE_LOCATION_8 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_8 + OFFSET)
		IF HINGE_QTY == 8
			BOTTOM_HINGE = JOH - HINGE_LOCATION_8 - OFFSET
		END_IF
	END_IF
	IF HINGE_LOCATION_9 > 0
		ADD_ARRAY_ELEM HINGE_LOCATIONS_ARRAY (HINGE_LOCATION_9 + OFFSET)
		IF HINGE_QTY == 9
			BOTTOM_HINGE = JOH - HINGE_LOCATION_9 - OFFSET
		END_IF
	END_IF
END_IF	

END_ASM_DESCR
