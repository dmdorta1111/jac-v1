BEGIN_GUI_DESCR

	SHOW_PARAM STRING MANUFACTURER
	SHOW_PARAM STRING LOCK_TYPE
	SHOW_PARAM STRING LOCK_MODEL
	SHOW_PARAM DOUBLE BACKSET
	SHOW_PARAM STRING LOCK_UDF
	SHOW_PARAM STRING LOCK_INST
	SHOW_PARAM DOUBLE ARMOR_WIDTH
	SHOW_PARAM DOUBLE ARMOR_HEIGHT
	SHOW_PARAM DOUBLE ARMOR_THICKNESS
	SHOW_PARAM DOUBLE OFFSET

END_GUI_DESCR

BEGIN_TAB_DESCR
BEGIN_TABLE	MANUFACTURER	"MANUFACTURER"
TABLE_OPTION 	DEPEND_ON_INPUT NO_FILTER
SEL_STRING	S_TABLE	MANUFACTURER
STRING	SUBTABLE	STRING
ROCKWOOD	ROCKWOOD	ROCKWOOD
! CORBIN	CORBIN	CORBIN RUSSWIN
! SARGENT	SARGENT	SARGENT
! SCHLAGE	SCHLAGE	SCHLAGE
END_TABLE

BEGIN_TABLE	ROCKWOOD	"ROCKWOOD"
TABLE_OPTION	DEPEND_ON_INPUT NO_FILTER
SEL_STRING	LOCK_MODEL	LOCK_TYPE	LOCK_UDF	LOCK_INST	BACKSET	OFFSET	ARMOR_HEIGHT	ARMOR_WIDTH	ARMOR_THICKNESS	OFFSET
STRING	STRING	STRING	STRING	STRING	DOUBLE	DOUBLE	DOUBLE	DOUBLE	DOUBLE	DOUBLE
590	RO_590	ROLLER LATCH	roller_latch	RO_590	0	0	3.375	1.0	0.156	0
591	RO_591	ROLLER LATCH	roller_latch	RO_590	0	0	3.375	1.0	0.156	0
592	RO_592	ROLLER LATCH	roller_latch	RO_590	0	0	3.375	1.0	0.156	0
END_TABLE

END_TAB_DESCR

BEGIN_ASM_DESCR

		DECLARE_VARIABLE STRING MANUFACTURER
		DECLARE_VARIABLE STRING LOCK_TYPE
		DECLARE_VARIABLE STRING LOCK_MODEL
		DECLARE_VARIABLE DOUBLE BACKSET
		DECLARE_VARIABLE DOUBLE OFFSET
		DECLARE_VARIABLE STRING TRIM ""
		DECLARE_VARIABLE STRING LOCK_UDF
		DECLARE_VARIABLE STRING LOCK_INST
		DECLARE_VARIABLE DOUBLE ARMOR_HEIGHT
		DECLARE_VARIABLE DOUBLE ARMOR_WIDTH
		DECLARE_VARIABLE DOUBLE ARMOR_THICKNESS
		DECLARE_VARIABLE STRING LOCK_DESC
		DECLARE_VARIABLE STRING REINFORCEMENT

	IF OPERATION == 0		
		! CONFIG_ELEM
		LOCK_DESC = MANUFACTURER + "\n" + LOCK_MODEL + "\n" + LOCK_TYPE		
	END_IF

	IF OPERATION == 1
		IF LOCK_INDEX == 1
			MANUFACTURER = PRIMARY_LOCK_MANUFACTURER
			LOCK_TYPE = PRIMARY_LOCK_TYPE
			LOCK_MODEL = PRIMARY_LOCK_SERIES_MODEL
			BACKSET = PRIMARY_LOCK_BACKSET
			OFFSET = PRIMARY_LOCK_OFFSET
			TRIM = PRIMARY_LOCK_TRIM
			LOCK_UDF = PRIMARY_LOCK_UDF
			LOCK_INST = PRIMARY_LOCK_INST
			ARMOR_HEIGHT = PRIMARY_LOCK_ARMOR_HEIGHT
			ARMOR_WIDTH = PRIMARY_LOCK_ARMOR_WIDTH
			ARMOR_THICKNESS = PRIMARY_LOCK_ARMOR_THICKNESS
		ELSE_IF LOCK_INDEX == 2
			MANUFACTURER = SECONDARY_LOCK_MANUFACTURER
			LOCK_TYPE = SECONDARY_LOCK_TYPE
			LOCK_MODEL = SECONDARY_LOCK_SERIES_MODEL
			BACKSET = SECONDARY_LOCK_BACKSET
			OFFSET = SECONDARY_LOCK_OFFSET
			TRIM = SECONDARY_LOCK_TRIM
			LOCK_UDF = SECONDARY_LOCK_UDF
			LOCK_INST = SECONDARY_LOCK_INST
			ARMOR_HEIGHT = SECONDARY_LOCK_ARMOR_HEIGHT
			ARMOR_WIDTH = SECONDARY_LOCK_ARMOR_WIDTH
			ARMOR_THICKNESS = SECONDARY_LOCK_ARMOR_THICKNESS
		 END_IF
	
		IF	HAND_ == "LHR" OR HAND_ == "LHRA1"
			SEARCH_MDL_REF DOOR_ASM CSYS "ACS4" ATTACH
			SEARCH_MDL_REF DOOR_ASM CSYS "ASM_DEF_CSYS" ATTACH1
			IF DOOR_CONSTRUCTION == "SEAMLESS"
				SEARCH_MDL_REF BODY SURFACE "SURFACE_S2" BODY_ARMOR
				SEARCH_MDL_REF COVER SURFACE "SURFACE_S2" COVER_ARMOR
				BODY_ROTATION = 180
				COVER_ROTATION = 0
			END_IF
			IF STRIKE_EDGE_SHAPE == "BEVEL"
				ARMOR_BEVEL = -4
			ELSE_IF STRIKE_EDGE_SHAPE == "SQUARE"
				ARMOR_BEVEL = 0
			END_IF
		END_IF

		IF	HAND_ == "RH" OR HAND_ == "RHA2"
			SEARCH_MDL_REF DOOR_ASM CSYS "ACS4" ATTACH
			SEARCH_MDL_REF DOOR_ASM CSYS "ASM_DEF_CSYS" ATTACH1
			IF DOOR_CONSTRUCTION == "SEAMLESS"
				SEARCH_MDL_REF BODY SURFACE "SURFACE_S2" BODY_ARMOR
				SEARCH_MDL_REF COVER SURFACE "SURFACE_S2" COVER_ARMOR
				BODY_ROTATION = 180
				COVER_ROTATION = 0
			END_IF
			IF STRIKE_EDGE_SHAPE == "BEVEL"
				ARMOR_BEVEL = -4
			ELSE_IF STRIKE_EDGE_SHAPE == "SQUARE"
				ARMOR_BEVEL = 0
			END_IF
		END_IF

		IF	HAND_ == "RHR" OR HAND_ == "RHRA2"
			SEARCH_MDL_REF DOOR_ASM CSYS "ACS3" ATTACH
			SEARCH_MDL_REF DOOR_ASM CSYS "ASM_DEF_CSYS" ATTACH1
			IF DOOR_CONSTRUCTION == "SEAMLESS"
				SEARCH_MDL_REF BODY SURFACE "SURFACE_S1" BODY_ARMOR
				SEARCH_MDL_REF COVER SURFACE "SURFACE_S1" COVER_ARMOR
				BODY_ROTATION = 0
				COVER_ROTATION = 180
			END_IF
			IF STRIKE_EDGE_SHAPE == "BEVEL"
				ARMOR_BEVEL = 4
			ELSE_IF STRIKE_EDGE_SHAPE == "SQUARE"
				ARMOR_BEVEL = 0
			END_IF
		END_IF

		IF	HAND_ == "LH" OR HAND_ == "LHA1"
			SEARCH_MDL_REF DOOR_ASM CSYS "ACS3" ATTACH
			SEARCH_MDL_REF DOOR_ASM CSYS "ASM_DEF_CSYS" ATTACH1
			IF DOOR_CONSTRUCTION == "SEAMLESS"
				SEARCH_MDL_REF BODY SURFACE "SURFACE_S1" BODY_ARMOR
				SEARCH_MDL_REF COVER SURFACE "SURFACE_S1" COVER_ARMOR
				BODY_ROTATION = 0
				COVER_ROTATION = 180
			END_IF
			IF STRIKE_EDGE_SHAPE == "BEVEL"
				ARMOR_BEVEL = 4
			ELSE_IF STRIKE_EDGE_SHAPE == "SQUARE"
				ARMOR_BEVEL =  0
			END_IF
		END_IF

		IF WELDED_PREPS == 1
			ARMOR_HEIGHT = LOCK_ARMOR_HEIGHT + .18
			ARMOR_WIDTH = LOCK_ARMOR_WIDTH +.18
			! LOCK_REINFORCEMENT = PRIMARY_LOCK_INST + ".ASM"
			! LOCK_REINFORCEMENT = PRIMARY_LOCK_REINFORCEMENT
		ELSE
			ARMOR_HEIGHT = LOCK_ARMOR_HEIGHT +.015
			ARMOR_WIDTH = LOCK_ARMOR_WIDTH +.015
			LOCK_REINFORCEMENT = PRIMARY_LOCK_REINFORCEMENT
		END_IF

		IF DOOR_CONSTRUCTION == "SEAMLESS" 
			IF DOOR_GAUGE == 18 AND LOCK_ARMOR_WIDTH <= 1.265
				ARMOR_INST = "NO_TAB"
			ELSE_IF DOOR_GAUGE == 18 AND LOCK_ARMOR_WIDTH > 1.265
				ARMOR_INST = "WITH_TAB"
			ELSE_IF DOOR_GAUGE == 16 AND LOCK_ARMOR_WIDTH <= 1.265
				ARMOR_INST = "NO_TAB"
			ELSE_IF DOOR_GAUGE == 16 AND LOCK_ARMOR_WIDTH > 1.265
				ARMOR_INST = "WITH_TAB"
			ELSE_IF DOOR_GAUGE == 14 AND LOCK_ARMOR_WIDTH <= 1.140
				ARMOR_INST = "NO_TAB"
			ELSE_IF DOOR_GAUGE == 14 AND LOCK_ARMOR_WIDTH > 1.140
				ARMOR_INST = "WITH_TAB"
			ELSE_IF DOOR_GAUGE == 12
				ARMOR_INST = "WITH_TAB"
			END_IF
		END_IF

		IF LOCK_ARMOR_WIDTH > DOOR_THICKNESS - 75 AND DOOR_CONSTRUCTION == "LOCKSEAM"
			IF HAND == "LHR" OR HAND == "LHRA"
				ARMOR_INST = "ARMOR_L2"
			ELSE_IF HAND == "RHR" OR HAND == "RHRA"
				ARMOR_INST = "ARMOR_L1"
			ELSE_IF HAND == "LH" OR HAND == "LHA"
				ARMOR_INST = "ARMOR_L1"
			ELSE_IF HAND == "RH" OR HAND == "RHA"
				ARMOR_INST = "ARMOR_L2"
			END_IF
		END_IF
		
		CREATE_UDF udf\face_plate BODY
			UDF_INSTANCE ARMOR_INST
			UDF_REF ATTACH ATTACH
			UDF_REF ARMOR_SURFACE BODY_ARMOR		
			UDF_DIM STRIKE_CTR STRIKE_CENTER
			UDF_DIM OFFSET -LOCK_OFFSET
			UDF_DIM ROTATION BODY_ROTATION
			UDF_DIM BEVEL ARMOR_BEVEL
			UDF_DIM ARMOR_WIDTH ARMOR_WIDTH
			UDF_DIM ARMOR_HEIGHT ARMOR_HEIGHT
			UDF_EXP_REF ATTACH2 CSYS 1
			UDF_INTERSECTION * PART_LEVEL
		END_CREATE_UDF

		CREATE_UDF udf\face_plate COVER
			UDF_INSTANCE ARMOR_INST
			UDF_REF ATTACH ATTACH
			UDF_REF ARMOR_SURFACE COVER_ARMOR		
			UDF_DIM STRIKE_CTR STRIKE_CENTER
			UDF_DIM OFFSET -LOCK_OFFSET
			UDF_DIM ROTATION COVER_ROTATION
			UDF_DIM BEVEL ARMOR_BEVEL
			UDF_DIM ARMOR_WIDTH ARMOR_WIDTH
			UDF_DIM ARMOR_HEIGHT ARMOR_HEIGHT
			UDF_EXP_REF ATTACH2 CSYS 1
			UDF_INTERSECTION * PART_LEVEL
		END_CREATE_UDF

		IF	HAND_ == "RHR" OR HAND_ == "LH" OR \
			HAND_ == "RHR2" OR HAND_ == "RHRA2" OR \
			HAND_ == "LH1" OR HAND_ == "LHA1"
				CREATE_UDF udf\csys DOOR_ASM
					UDF_REF ATTACH ATTACH2
					UDF_DIM	ROTX 0
					UDF_DIM	ROTY 0
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX 0
					UDF_DIM	LOCY 0
					UDF_DIM	LOCZ 0
					UDF_EXP_REF ATTACH2 CSYS 0
				END_CREATE_UDF
		END_IF

		IF	HAND_ == "LHR" OR HAND_ == "RH" OR \
			HAND_ == "LHR1" OR HAND_ == "LHRA1" OR \
			HAND_ == "RH2" OR HAND_ == "RHA2"

				CREATE_UDF udf\csys DOOR_ASM
					UDF_REF ATTACH ATTACH2
					UDF_DIM	ROTX 180
					UDF_DIM	ROTY 0
					UDF_DIM	ROTZ 0
					UDF_DIM	LOCX 0
					UDF_DIM	LOCY 0
					UDF_DIM	LOCZ 0
					UDF_EXP_REF ATTACH2 CSYS 0
				END_CREATE_UDF
		END_IF
		
		PRIMARY_LOCK_REINFORCEMENT = "RO_590_1.ASM"

		RETRIEVE_MDL &PRIMARY_LOCK_REINFORCEMENT COMP
		SEARCH_MDL_REF COMP CSYS "ATTACH" ATTACH

		ASSEMBLE COMP DOOR_ASM
			 CSYS ATTACH2 ATTACH
		END_ASSEMBLE
	END_IF

END_ASM_DESCR
