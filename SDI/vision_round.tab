BEGIN_ASM_DESCR

	DECLARE_VARIABLE DOUBLE VISION_A_ALLOWANCE
	DECLARE_VARIABLE INTEGER LITE_QTY
	DECLARE_VARIABLE INTEGER LITE_INDEX
	
	SEARCH_MDL_REF DOOR_ASM CSYS "ASM_DEF_CSYS" ASM_CSYS
	DECLARE_VARIABLE DOUBLE LOCX
	
	VISION_A_ALLOWANCE = 0
	LOCX = 0
	LITE_QTY = 1	
	LITE_INDEX = 1

	WHILE LITE_INDEX <= LITE_QTY
		CREATE_UDF udf\csys DOOR_ASM
			UDF_REF ATTACH ASM_CSYS
			UDF_DIM	ROTX 0
			UDF_DIM	ROTY 0
			UDF_DIM	ROTZ 0
			UDF_DIM	LOCX LOCX
			UDF_DIM	LOCY VISION_CENTER_BOTTOM
			UDF_DIM	LOCZ 0
			UDF_EXP_REF ATTACH CSYS 0
		END_CREATE_UDF
		
		SET_REF_NAME ATTACH "VISION_ROUND_" + itos(LITE_INDEX)
		
		CREATE_UDF udf\vision_round DOOR_ASM
			UDF_REF ATTACH ATTACH
			UDF_DIM DIA VISION_DIAMETER
			UDF_INTERSECTION * PART_LEVEL		
		END_CREATE_UDF
	
		RETRIEVE_MDL STRAP_ROUND.PRT COMP
		SEARCH_MDL_REF COMP CSYS "PLACEMENT" PLACEMENT
			ASSEMBLE COMP DOOR_ASM
				CSYS ATTACH PLACEMENT
			END_ASSEMBLE

			SET_MDL_PARAM COMP "STOCKTYPE" 1
			SET_MDL_PARAM COMP "d78" (VISION_DIAMETER+.1)/2
			SET_MDL_PARAM COMP "d40" DOOR_THICKNESS - .125
									
			CALL_EX instantiate.tab
				VAR_IN	COMP	COMP
			END_CALL_EX
		LITE_INDEX++
	END_WHILE
	
END_ASM_DESCR
